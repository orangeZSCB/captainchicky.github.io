<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>software | Azimuth | Page 2</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="https://johncarlosbaez.wordpress.com/xmlrpc.php" />
<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//s.wordpress.com' />
<link rel="alternate" type="application/rss+xml" title="Azimuth &raquo; Feed" href="https://johncarlosbaez.wordpress.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Azimuth &raquo; Comments Feed" href="https://johncarlosbaez.wordpress.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Azimuth &raquo; software Category Feed" href="https://johncarlosbaez.wordpress.com/category/software/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1625065786h&ver=5.8.1"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s2.wp.com/_static/??-eJyNkttSAyEMhl9IyFKnOl44PguHiKnAMhBaeXvZajvrqfWGIQnfn58AHLKwc2JMDLGJHJqnVIHSMyXiDvyCESvkZuB4LGaWttYbWHEnyLcRGix+VArCXim5lQpMo+DAhNm+ikCm6NKhcg94FqJkQ3Ojza5CREcaw+i6OFoFOeiORQT02nYZKV3HR20df4H+Nn90OsSQs14s6z43Fr6Q+2b73xJFMyVfr+B2/sQ2Uk1jbo4qn5Pid3b1ZMvMRz5m/fPiF7ADOY888HraC8a3y0gebYQxuWCtYqyRWhQfP2XhnuKjurtV9w/badrs3gHJreS0?cssminify=yes' type='text/css' media='all' />
<style id='wp-block-library-inline-css'>
.has-text-align-justify {
	text-align:justify;
}
</style>
<style id='global-styles-inline-css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--normal: 16px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--huge: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-normal-font-size{font-size: var(--wp--preset--font-size--normal) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-huge-font-size{font-size: var(--wp--preset--font-size--huge) !important;}
</style>
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??-eJx9i0EKgCAQAD+ULYJRHaK3qJhY666o0fezW126zcAMGNR09LaUDq4kLFN1VCGeIuHpAxXwjgWy1TUwfURsqEP+W7MzyL6hh1a99JnWuEg1zEpNo1T7DZLtMYQ=?cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-3-1' href='https://s2.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<style id='jetpack-global-styles-frontend-style-inline-css'>
:root { --font-headings: unset; --font-base: unset; --font-headings-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif; --font-base-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;}
</style>
<link rel='stylesheet' id='all-css-6-1' href='https://s0.wp.com/wp-content/themes/h4/global.css?m=1420737423h&cssminify=yes' type='text/css' media='all' />
<script id='wpcom-actionbar-placeholder-js-extra'>
var actionbardata = {"siteID":"12777403","siteName":"Azimuth","siteURL":"http:\/\/johncarlosbaez.wordpress.com","siteHost":"johncarlosbaez.wordpress.com","icon":"<img alt='' src='https:\/\/s2.wp.com\/i\/logo\/wpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/contempt","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/wordpress.com\/log-in?redirect_to=https%3A%2F%2Fjohncarlosbaez.wordpress.com%2F2014%2F02%2F05%2Fcategory-theory-for-better-spreadsheets%2F&signup_flow=account","themeURL":"","xhrURL":"https:\/\/johncarlosbaez.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"677eca7dd0","isSingular":"","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"0272f16312\" \/>","referer":"https:\/\/johncarlosbaez.wordpress.com\/category\/software\/page\/2\/","canFollow":"1","feedID":"62242","statusMessage":"","subsEmailDefault":"instantly","customizeLink":"https:\/\/johncarlosbaez.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fjohncarlosbaez.wordpress.com%2Fcategory%2Fsoftware%2Fpage%2F2%2F","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: Contempt","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/read\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 5,227 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/wordpress.com\/log-in?redirect_to=https%3A%2F%2Fjohncarlosbaez.wordpress.com%2F2014%2F02%2F05%2Fcategory-theory-for-better-spreadsheets%2F&signup_flow=account\">Log in now.<\/a>","stats":"Stats","notifyNewPosts":"Notify me of new posts","notifyNewPostsDetails":"Receive web and mobile notifications for new posts from this site.","emailNewPosts":"Email me new posts","emailNewPostsDetails":"You can customize your notification settings further <a href=\"https:\/\/wordpress.com\/following\/manage?s=johncarlosbaez.wordpress.com\">here<\/a>.","emailNewComments":"Email me new comments","instantly":"Instantly","daily":"Daily","weekly":"Weekly"}};
</script>
<script crossorigin='anonymous' type='text/javascript' src='https://s2.wp.com/_static/??-eJyFykEKwkAMQNELmQ4qtboQz1LbWDJMknGSQXt7K9SFILj6i//CI8Og4igeooWs5oxm/YRNtE34vqxXSgjVsCxAHEhu+sOV5JCLPufPIxlSHdHeM94rlnlNwyR/ETBNpXdc8YXP28OuOx3brt3HF3swRvU='></script>
<script type='text/javascript'>
	window.addEventListener( 'DOMContentLoaded', function() {
		rltInitialize( {"token":null,"iframeOrigins":["https:\/\/widgets.wp.com"]} );
	} );
</script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://johncarlosbaez.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress.com" />

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="website" />
<meta property="og:title" content="software &#8211; Page 2 &#8211; Azimuth" />
<meta property="og:url" content="https://johncarlosbaez.wordpress.com/category/software/" />
<meta property="og:site_name" content="Azimuth" />
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta property="fb:app_id" content="249643311490" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://s1.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="icon" type="image/x-icon" href="https://s1.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="apple-touch-icon" href="https://s2.wp.com/i/webclip.png" />
<link rel='openid.server' href='https://johncarlosbaez.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://johncarlosbaez.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://johncarlosbaez.wordpress.com/osd.xml" title="Azimuth" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>		<style type="text/css">
			.recentcomments a {
				display: inline !important;
				padding: 0 !important;
				margin: 0 !important;
			}

			table.recentcommentsavatartop img.avatar, table.recentcommentsavatarend img.avatar {
				border: 0px;
				margin: 0;
			}

			table.recentcommentsavatartop a, table.recentcommentsavatarend a {
				border: 0px !important;
				background-color: transparent !important;
			}

			td.recentcommentsavatarend, td.recentcommentsavatartop {
				padding: 0px 0px 1px 0px;
				margin: 0px;
			}

			td.recentcommentstextend {
				border: none !important;
				padding: 0px 0px 2px 10px;
			}

			.rtl td.recentcommentstextend {
				padding: 0px 10px 2px 0px;
			}

			td.recentcommentstexttop {
				border: none;
				padding: 0px 0px 0px 10px;
			}

			.rtl td.recentcommentstexttop {
				padding: 0px 10px 0px 0px;
			}
		</style>
		<meta name="application-name" content="Azimuth" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://johncarlosbaez.wordpress.com/feed/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="description" content="Posts about software written by John Baez" />
<style type="text/css">
#headerimg{
	background: url(https://johncarlosbaez.files.wordpress.com/2010/08/azimuth_header.jpg) no-repeat;
}
#header h1 a, .description {
	color:#E5F2E9;
}
</style>
<!-- There is no amphtml version available for this URL. -->		<link rel="stylesheet" id="custom-css-css" type="text/css" href="https://s0.wp.com/?custom-css=1&#038;csblog=RBZ9&#038;cscache=6&#038;csrev=7" />
		</head>
<body class="archive paged category category-software category-581 paged-2 category-paged-2 customizer-styles-applied highlander-enabled highlander-light">

<div id="page">

<div id="header">
	<div id="headerimg" onclick="location.href='https://johncarlosbaez.wordpress.com';" style="cursor: pointer;">
		<h1><a href="https://johncarlosbaez.wordpress.com/">Azimuth</a></h1>
		<div class="description"></div>
	</div>
</div>

<ul id="pagebar" class="menu pagebar"><li ><a href="https://johncarlosbaez.wordpress.com/">Home</a></li><li class="page_item page-item-2"><a href="https://johncarlosbaez.wordpress.com/about/">About</a></li>
</ul>

<div id="grad" style="height: 65px; width: 100%; background: url(https://s2.wp.com/wp-content/themes/pub/contempt/images/blue_flower/topgrad.jpg);">&nbsp;</div>

	<div id="content">

	
		
			<div class="post-17391 post type-post status-publish format-standard hentry category-computer-science category-software" id="post-17391">
				<h2><a href="https://johncarlosbaez.wordpress.com/2014/02/05/category-theory-for-better-spreadsheets/" rel="bookmark">Category Theory for Better&nbsp;Spreadsheets</a></h2>
				<small>5 February, 2014</small><br />


				<div class="entry">
					<p><a href="http://www.indiegogo.com/projects/make-spreadsheets-safe--2"><img width="450" src="https://images.indiegogo.com/medias/1209498/primary_pictures/full/20140121065844-before_modules_620_mss.png?1390316328" /></a></p>
<p>Since one goal of Azimuth is to connect mathematicians to projects that can more immediately help the world, I want to pass this on.   It&#8217;s a press release put out by Jocelyn Paine, who has blogged about applied category theory <a href="http://golem.ph.utexas.edu/category/2009/04/graphical_category_theory_demo.html">on the <i>n</i>-Category Café</a>.  I think he&#8217;s a serious guy, so I hope we can help him out!</p>
<blockquote><p>
Spreadsheet researcher Jocelyn Ireson-Paine has launched an Indiegogo campaign to fund a project to make spreadsheets safer. It will show how to write spreadsheets that are easier to read and less error-prone than when written in Excel. This is important because spreadsheet errors have cost some companies millions of pounds, even causing resignations and share-price crashes. An error in one spreadsheet, an economic model written in 2010 by Harvard economists Carmen Reinhart and Kenneth Rogoff, has even been blamed for tax rises and public-sector cuts. If he gets funding, Jocelyn will re-engineer this spreadsheet. He hopes that, because of its notoriety, this will catch public attention.</p>
<p>Reinhart and Rogoff&#8217;s spreadsheet was part of a paper on the association between debt and economic growth. They concluded that in countries where debt exceeds 90% of gross domestic product, growth is notably lower. But in spring 2013, University of Massachusetts student Thomas Herndon found they had omitted data when calculating an average. Because their paper&#8217;s conclusion supported governments&#8217; austerity programmes, much criticism followed. They even received hate email blaming them for tax rises and public-sector cuts.</p>
<p>Jocelyn said, &#8220;The error probably didn&#8217;t change the results much. But better software would have made the nature of the error clearer, as well as the economics calculations, thus averting ill-informed and hurtful media criticism. Indeed, it might have avoided the error altogether.&#8221;</p>
<p>Jocelyn&#8217;s project will use two ideas. One is &#8220;literate programming&#8221;. Normally, a programmer writes a program first, then adds comments explaining how it works. But in literate programming, the programmer becomes an essayist. He or she first writes the explanation, then inserts the calculations as if putting equations into a maths essay.  In ordinary spreadsheets, you&#8217;re lucky to get any documentation at all; in literate spreadsheets, documentation comes first.</p>
<p>The other idea is &#8220;modularity&#8221;. This means building spreadsheets from self-contained parts which can be developed, tested, and documented independently of one another. This gives the spreadsheet&#8217;s author less to think about, making mistakes less likely. It also makes it easier to replace parts that do have mistakes.</p>
<p>Jocelyn has embodied these ideas in a piece of software named Excelsior. He said, &#8220;&#8216;Excelsior&#8217; means &#8216;higher&#8217; in Latin, and &#8216;upwards!&#8217; in Longfellow&#8217;s poem. I think of it as meaning &#8216;upwards from Excel&#8217;. In fact, though, it&#8217;s the name of a wonderful Oxford café where I used to work on my ideas.&#8221;</p>
<p>Jocelyn also wants to show how advanced maths benefits computing. Some of his inspiration came from a paper he found on a friend&#8217;s desk in the Oxford University Department of Computer Science. Written by professor Joseph Goguen, this used a branch of maths called category theory to elucidate what it means for something to be part of a system, and how the behaviour of a system arises from the behaviours of its parts. Jocelyn said, &#8220;The ideas in the paper were extremely general, applying to many different areas. And when you think of modules as parts, they even apply to spreadsheets. This shows the value of abstraction.&#8221;
</p></blockquote>
<h3> For more </h3>
<p>For pictures or more information, please contact Jocelyn Ireson-Paine:</p>
<p>Postal: 23 Stratfield Road, Oxford, OX2 7BG, UK.<br />
Tel: 07768 534 091.<br />
Email: make-spreadsheets-safe@j-paine.org</p>
<p>Campaign Web site: <a href="http://igg.me/at/safe-spreadsheets" rel="nofollow">http://igg.me/at/safe-spreadsheets</a></p>
<p>Campaign blog: <a href="http://blog.make-spreadsheets-safe.co.uk/" rel="nofollow">http://blog.make-spreadsheets-safe.co.uk/</a></p>
<p>Jocelyn&#8217;s bio: <a href="http://www.j-paine.org/bio.html" rel="nofollow">http://www.j-paine.org/bio.html</a></p>
<p>Jocelyn&#8217;s personal website, for academic and general stuff: <a href="http://www.j-paine.org/" rel="nofollow">http://www.j-paine.org/</a></p>
<p>Background information: links to all topics mentioned can be found at the end of Paine&#8217;s campaign text at </p>
<p><a href="http://igg.me/at/safe-spreadsheets" rel="nofollow">http://igg.me/at/safe-spreadsheets</a></p>
<p>These include literate programming, modularity, the Reinhart-Rogoff spreadsheet, category theory, and many horror stories about the damage caused by spreadsheet errors.</p>
									</div>

				<p class="postmetadata">
				<img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/speech_bubble.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2014/02/05/category-theory-for-better-spreadsheets/#comments">16 Comments</a>				| <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/documents.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/category/computer-science/" rel="category tag">computer science</a>, <a href="https://johncarlosbaez.wordpress.com/category/software/" rel="category tag">software</a>								 | <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/permalink.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2014/02/05/category-theory-for-better-spreadsheets/" rel="bookmark" title="Permanent Link to Category Theory for Better&nbsp;Spreadsheets">Permalink</a>
<br /><img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/figure_ver1.gif" alt="" /> Posted by John Baez				</p>
			</div>
			<hr />
		
			<div class="post-16550 post type-post status-publish format-standard hentry category-publishing category-software category-the-practice-of-science" id="post-16550">
				<h2><a href="https://johncarlosbaez.wordpress.com/2013/07/29/the-selected-papers-network-part-4/" rel="bookmark">The Selected Papers Network (Part&nbsp;4)</a></h2>
				<small>29 July, 2013</small><br />


				<div class="entry">
					<p><i>guest post by <b><a href="http://potentialinfo.blogspot.com/">Christopher Lee</a></b></i></p>
<p>In my <a href="https://johncarlosbaez.wordpress.com/2013/07/12/the-selected-papers-network-part-3/">last post</a>, I outlined four aspects of walled gardens that make them very resistant to escape:</p>
<p>&bull; walled gardens make individual choice irrelevant, by transferring control to the owner, and tying your one remaining option (to leave the container) to being locked out of your professional ecosystem;</p>
<p>&bull; all competition is walled garden;</p>
<p>&bull; walled garden competition is winner-take-all;</p>
<p>&bull; even if the &#8220;good guys&#8221; win (build the biggest walled garden), they become &#8220;bad guys&#8221; (masters of the walled garden, whose interests become diametrically opposed to that of the people stuck in their walled garden).</p>
<p>To state the obvious: even if someone launched a new site with the perfect interface and features for an alternative system of peer review, it would probably starve to death both for lack of users and lack of impact.  Even for the rare user who found the site and switched all his activity to it, he would have little or no impact because almost no one would see his reviews or papers.  Indeed, even if the Open Science community launched <b>dozens</b> of sites exploring various useful new approaches for scientific communication, that might make Open Science&#8217;s prospects <b>worse</b> rather than better.  Since each of these sites would in effect be a little walled garden (for reasons I outlined last time), their number and diversity would mainly serve to fragment the community (i.e. the membership and activity on each such site might be ten times less than it would have been if there were only a few such sites).  When your strengths (diversity; lots of new ideas) act as weaknesses, you need a new strategy.</p>
<p><a href="https://selectedpapers.net/">SelectedPapers.net</a> is an attempt to an offer such a new strategy. It represents only about two weeks of development work by one person (me), and has only been up for about a month, so it can hardly be considered the last word in the manifold possibilities of this new strategy.  However, this bare bones prototype demonstrates how we can solve the four &#8216;walled garden dilemmas&#8217;:</p>
<p>&bull; <b>Enable walled-garden users to &#8216;levitate&#8217;</b>&#8212;be &#8216;in&#8217; the walled garden but &#8216;above&#8217; it at the same time.  There&#8217;s nothing mystical about this.  Think about it: that&#8217;s what search engines do all the time&#8212;a search engine pulls material out of all the worlds&#8217; walled gardens, and gives it a new life by unifying it based on <b>what it&#8217;s about</b>.  All <a href="https://selectedpapers.net/">selectedpapers.net</a> does is act as a search engine that indexes content by <b>what paper</b> and <b>what topics</b> it&#8217;s about,  and <b>who wrote it</b>.  </p>
<p>This enables isolated posts by different people to come together in a unified conversation about a  specific paper (or topic), independent of what walled gardens they came from&#8212;<i>while simultaneously carrying on their full, normal life in their original walled garden</i>.  </p>
<p>Concretely, rather than telling Google+ users (for example) they should  stop posting on Google+ and post only on <a href="https://selectedpapers.net/">selectedpapers.net</a> instead (which would make their initial audience plunge to near zero), we tell them to add a few tags to their Google+ post so selectedpapers.net can easily index it. They retain their full Google+ audience, but they acquire a whole new set of potential interactions and audience  (trivial example: if they post on a given paper, selectedpapers.net will display their post next to other people&#8217;s posts on the same paper, resulting in all sorts of possible crosstalk).</p>
<p>Some people have expressed concern that <a href="https://selectedpapers.net/">selectedpapers.net</a> indexes Google+, rightly pointing out that Google+ is yet another walled garden.  Doesn&#8217;t that undercut our strategy to escape from walled gardens?  No.  Our strategy is <i>not</i> to try to find a container that is not a walled garden; our strategy is to &#8216;levitate&#8217; content from walled gardens. Google+ may be a walled garden in some respects, but it allows us to index users&#8217; content, which is all we need.</p>
<div align="center">
<img src="https://i0.wp.com/www.timeoutdubai.com/images/content/parkour_in_dubai/innerbig/parkour_1_innerbig.jpg" />
</div>
<p>It should be equally obvious that <a href="https://selectedpapers.net/">selectedpapers.net</a> should not limit itself to Google+.  Indeed, why should a search engine  restrict itself to anything less than the whole world?  Of course, there&#8217;s a spectrum of different levels of technical challenges for doing this.  And this tends to produce an 80-20 rule, where 80% of the value can be attained by only 20% of the work. Social networks like Google+, Twitter etc. provide a large portion of the value (potential users), for very little effort&#8212;they provide open APIs that let us search their indexes, very easily.  Blogs represent another valuable category for indexing.</p>
<p>More to the point, far more important than technology is building a <i>culture</i> where users expect their content to &#8216;fly&#8217; unrestricted by walled-garden boundaries, and adopt shared practices that make that happen easily and naturally.  Tagging is a simple example of that.  By putting the key metadata (paper ID, topic ID) into the user&#8217;s public content, in a simple, standard way (as opposed to hidden in the walled garden&#8217;s proprietary database), tagging makes it easy for anyone and everyone to index it.  And the more users get accustomed to the freedom and benefits this provides, the less willing they&#8217;ll be to accept walled gardens&#8217; trying to take ownership (ie. control) of the users&#8217; own content.</p>
<p>&bull; <b>Don&#8217;t compete; cooperate</b>: if we admit that it will be extremely difficult for a small new site (like <a href="https://selectedpapers.net/">selectedpapers.net</a>) to compete with the big walled gardens that surround it, you might rightly ask, what options are left?  Obviously, <i>not</i> to compete.  But concretely, what would that mean?</p>
<p>☆ enable users in a walled garden to liberate their own content by tagging and indexing it;</p>
<p>☆ add value for those users (e.g. for mathematicians, give them LaTeX equation support);</p>
<p>☆ use the walled garden&#8217;s public channel as your network transport&#8212;i.e. build your community within and through the walled garden&#8217;s community.</p>
<p>This strategy treats the walled garden not as a competitor (to kill or be killed by) but instead as a partner (that provides value to you, and that you in turn add value to). Morever, since this cooperation is designed to be open and universal rather than an exclusive partnership (concretely, <i>anyone</i> could index <a href="https://selectedpapers.net/">selectedpapers.net</a> posts, because they are public), we can best describe this as <b>public data federation</b>.</p>
<p><i>Any number</i> of sites could cooperate in this way, simply by:</p>
<p>☆ sharing a common culture of standard tagging conventions;</p>
<p>☆ treating public data (i.e. viewable by anybody on the web) as public (i.e. indexable by anybody);</p>
<p>☆ drawing on the shared index of global content (i.e. when the index has content that&#8217;s relevant to your site&#8217;s users, let them see and interact with it).</p>
<p>To anyone used to the traditional challenges of software interoperability, this might seem like a tall order&#8212;it might take years of software development to build such a data federation.  But consider: by using Google+&#8217;s open API, <a href="https://selectedpapers.net/">selectedpapers.net</a> has <i>de facto</i> established such a data federation with Google+, one of the biggest players in the business.  Following the checklist:</p>
<p>☆ selectedpapers.net offers a very simple tagging standard, and more and more Google+ users are trying it;</p>
<p>☆ Google+ provides the API that enables public posts to be searched and indexed.  Selectedpapers.net in turn assures that posts made on selectedpapers.net are visible to Google+ by simply posting them on Google+;</p>
<p>☆ Selectedpapers.net users can see posts from (and have discussions with) Google+ users who have never logged into (or even heard of) selectedpapers.net, and vice versa.</p>
<p>Now consider: what if someone set up their <i>own</i> site based on the open source selectedpapers.net code (or even wrote their own implementation of our protocol from scratch).  What would they need to do to ensure 100% interoperability (i.e. our three federation  requirements above) with selectedpapers.net?  <i>Nothing</i>.  That federation interoperability is built into the protocol design itself.  And since this is <i>federation</i>, that also means they&#8217;d have 100% interoperation with Google+ as well.  We can easily do so also with Twitter, WordPress, and other public networks.</p>
<p>There are lots of relevant websites in this space.  Which of them can we actually federate with in this way?  This divides into two classes: those that have open APIs vs. those that don&#8217;t.  If a walled garden has an API, you can typically federate with it simply by writing some code to use their API, and encouraging its users to start tagging.  Everybody wins: the users gain new capabilities for free, and you&#8217;ve added value to that walled garden&#8217;s platform.  For sites that lack such an API (typically smaller sites), you need more active cooperation to establish a data exchange protocol.  For example, we are just starting discussions with arXiv and MathOverflow about such &#8216;federation&#8217; data exchange.</p>
<p>To my mind, the most crucial aspect of this is <b>sincerity</b>: we truly wish to cooperate with (add value to) all these walled garden sites, <i>not</i> to compete with them (harm them).  This isn&#8217;t some  insidious commie plot to infiltrate and somehow destroy them. The bottom line is that websites will only join a federation if it benefits them, by making their site more useful and more attractive to users.  Re-connecting with the rest of the world (in other walled gardens) accomplishes that in a very fundamental way.  The only scenario I see where this would not seem advantageous, would be for a site that truly believes that <i>it</i> is going to achieve market dominance across this whole space (&#8216;one walled garden to rule them all&#8217;).  Looking over the landscape of players (big players like Google, Twitter, LinkedIn, Facebook, vs. little players focused on this space like Mendeley, ResearchGate, etc.), I don&#8217;t think any of the latter can claim this is a realistic plan&#8212;especially when you consider that any success in that direction will just make all other players federate together in self-defense.</p>
<p>&bull; <b>Level the playing field</b>: these considerations lead naturally to our third concern about walled gardens: walled garden competition strongly penalizes new, small players, and makes bigger players assume a winner-takes-all outcome.  Concretely, <a href="https://selectedpapers.net/">selectedpapers.net</a> (or any other new site) is puny compared with, say, Mendeley. However, the federation strategy allows us to turn that on its head.  Mendeley is puny compared with Google+, and selectedpapers.net operates in de facto federation with Google+. How likely is it that Mendeley is going to crush Google+ as a social network where people discuss science?  If a selectedpapers.net user could only post to other selectedpapers.net members (a small audience), then Mendeley wins by default. But that&#8217;s not how it works: a selectedpapers.net user has all of Google+ as his potential audience.  In a federation strategy, the question isn&#8217;t how big <i>you</i> are, but rather how big your <i>federation</i> is.  And in this day of open APIs, it is really easy to extend that de facto federation across a big fraction of the world&#8217;s social networks.  And <i>that</i> is level playing field.</p>
<p>&bull; <b>Provide no point of control</b>: our last concern about walled gardens was that they inevitably create a divergence of interests for the winning garden&#8217;s owner vs. the users trapped inside. Hence the best of intentions (great ideas for building a wonderful community) can truly become the road to hell&#8212;an even better walled garden.  After all, that&#8217;s how the current walled garden system evolved (from the reasonable and beneficial idea of establishing <i>journals</i>).  If any one site &#8216;wins&#8217;, our troubles will just start all over again.  Is there any alternative?</p>
<p>Yes: don&#8217;t let any one site <i>win</i>; only build a successful <i>federation</i>.  Since user data can flow freely throughout the federation, <i>users</i> can move freely within the federation, without losing their content, accumulated contacts and reputation, in short, their professional ecosystem. If a successful site starts making policies that are detrimental to users, they can easily vote with their feet.  The data federation  re-establishes the basis for a free market, namely unconstrained individual freedom of choice.</p>
<p>The key is that there is no central point of control.  No one &#8216;owns&#8217; (i.e. controls) the data.  It will be stored in many places.  No one can decide to start denying it to someone else. Anyone can access the public data under the rules of the federation.  Even if multiple major players conspired together, anyone else could set up an alternative site and appeal to users: vote with your feet!  As we know from history, the problem with senates and other central control mechanisms is that given enough time and resources, they can be corrupted and captured by both elites and dictators.  Only a federation system with no central point of control has a basic defense: regardless of what happens at &#8216;the top&#8217;, all individuals in the system have freedom of choice between many alternatives, and anybody can start a new alternative at any time.  Indeed, the key red flag in any such system is when the powers-that-be start pushing all sorts of new rules that hinder people from starting new alternatives, or freely migrating to alternatives.</p>
<p>Note that implicit in this is an assertion that a healthy ecosystem should contain many diverse alternative sites that serve different subcommunities, united in a public data federation. I am <i>not</i> advocating that <a href="https://selectedpapers.net/">selectedpapers.net</a> should become the &#8216;one paper index to rule them all&#8217;.  Instead, I&#8217;m saying we need one successful exemplar of a federated system, that can help people see how to move their content beyond the walled garden and start &#8216;voting with their feet&#8217;.</p>
<p>So: how do we get there?  In my view, we need to use selectedpapers.net to prove the viability of the federation model in two ways:</p>
<p>☆ we need to develop the <a href="https://selectedpapers.net/">selectedpapers.net</a> interface to be a genuinely good way to discuss scientific papers, and subscribe to others&#8217; recommendations.  It goes without saying that the current interface needs lots of improvements, e.g. to work past some of Google+&#8217;s shortcomings.  Given that the current interface took only a couple of weeks of hacking by just one developer (yours truly), this is eminently doable.</p>
<p>☆ we need to show that selectedpapers.net is not just a prisoner of Google+, but actually an open federation system, by adding other systems to the federation, such as Twitter and independent blogs.  Again, this is straightforward.</p>
<h3> To Be or Not To Be? </h3>
<p>All of which brings us to the real question that will determine our fates.  Are you for a public data federation, or not?  In my<br />
view, if you seriously want reform of the current walled garden<br />
system, federation is the <i>only</i> path forward that is actually a path <i>forward</i> (instead of to just another walled garden). It is the only strategy that allows the community to retain control over its own content.  That is fundamental.</p>
<p>And if you do want a public data federation, are you willing to<br />
<i>work</i> for that outcome?  If not, then I think you don&#8217;t really want it&#8212;because you can contribute very easily.  Even just adding #spnetwork tags to your posts&#8212;wherever you write them&#8212;is a very valuable contribution that enormously increases the value of the federation ecosystem.</p>
<p>One more key question: who will join me in developing the<br />
selectedpapers.net platform (both the software, and federation alliances)?  As long as selectedpapers.net is a one-man effort, it must fail.  We don&#8217;t need a big team, but it&#8217;s time to turn the project into a real team. The project has solid foundations that will enable rapid development of new federation partnerships&#8212;e.g. exciting, open APIs like REST &#8212; and of seamless, intuitive user interfaces &#8212; such as the MongoDB noSQL database, and AJAX methods.  A small, collaborative team will be able to push this system forward quickly in exciting, useful ways. If you jump in now, you can be one of the very first people on the team.</p>
<p>I want to make one more appeal.  Whatever you think about<br />
<a href="https://selectedpapers.net/">selectedpapers.net</a> as it exists today, forget about it.</p>
<p>Why?  Because it&#8217;s irrelevant to the decision we need to make today: public data federation, <i>yes or no?</i> First, because the many flaws of the current selectedpapers.net have almost no bearing on that critical question (they mainly reflect the limitations of a version 0.1 alpha product).  Second, because the whole point of federation is to &#8216;let a thousand flowers bloom&#8217;&#8212; to enable a diverse ecology of different tools and interfaces, made viable because they work together as a federation, rather than starving to death as separate, warring, walled gardens.</p>
<p>Of course, to get to that diverse, federated ecosystem, we first<br />
have to prove that <i>one</i> federated system can succeed&#8212;and<br />
liberate a bunch of minds in the process, starting with our own.  We have to assemble a nucleus of users who are committed to making this idea succeed by using it, and a team of developers who are driven to build it.  Remember, <i>talking</i> about the federation ideal will not by itself accomplish anything.  We have to act, <i>now</i>; specifically, we have to quickly build a system that lets more and more people see the direct benefits of public data federation.  If and when that is clearly successful, and growing sustainably, we can consider branching out, but not before.</p>
<p>For better or worse, in a world of walled gardens, selectedpapers.net is the one effort (in my limited knowledge) to do exactly that. It may be ugly, and annoying, and alpha, but it offers people a new and different kind of social contract than the walled gardens. (If someone can point me to an equivalent effort to implement the same public data federation strategy, we will of course be delighted to work with them!  That&#8217;s what federation means).</p>
<p>The question now for the development of public data federation is whether we are working together to make it happen, or on the contrary whether we are fragmenting and diffusing our effort.  I believe that public data federation is the Manhattan Project of the war for Open Science. It really could change the world in a fundamental and enduring way. Right now the world may seem headed the opposite direction (higher and higher walls), but it does not have to be that way. I believe that all of the required ingredients are demonstrably available and ready to go.  The only remaining requirement is that we rise as a community and do it.</p>
<p>I am speaking to <i>you</i>, as one person to another.  You as an individual do not even have the figleaf of saying &#8220;Well, if <i>I</i> do this, what&#8217;s the point? One person can&#8217;t have any impact.&#8221;  You as an individual can change this project. You as an individual can change the world around you through what you do on this project.</p>
									</div>

				<p class="postmetadata">
				<img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/speech_bubble.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2013/07/29/the-selected-papers-network-part-4/#comments">11 Comments</a>				| <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/documents.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/category/publishing/" rel="category tag">publishing</a>, <a href="https://johncarlosbaez.wordpress.com/category/software/" rel="category tag">software</a>, <a href="https://johncarlosbaez.wordpress.com/category/the-practice-of-science/" rel="category tag">the practice of science</a>								 | <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/permalink.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2013/07/29/the-selected-papers-network-part-4/" rel="bookmark" title="Permanent Link to The Selected Papers Network (Part&nbsp;4)">Permalink</a>
<br /><img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/figure_ver1.gif" alt="" /> Posted by John Baez				</p>
			</div>
			<hr />
		
			<div class="post-15722 post type-post status-publish format-standard hentry category-mathematics category-networks category-software" id="post-15722">
				<h2><a href="https://johncarlosbaez.wordpress.com/2013/04/19/petri-net-programming-part-3/" rel="bookmark">Petri Net Programming (Part&nbsp;3)</a></h2>
				<small>19 April, 2013</small><br />


				<div class="entry">
					<p><i>guest post by </i><i><b><a href="http://www.azimuthproject.org/azimuth/show/David+Tanzer">David Tanzer</a></b></i></p>
<h3>The role of differential equations</h3>
<p><a href="https://johncarlosbaez.wordpress.com/2012/12/20/petri-net-programming-part-2/">Last time</a> we looked at stochastic Petri nets, which use a random event model for the reactions. Individual entities are represented by tokens that flow through the network.  When the token counts get large, we observed that they can be approximated by continuous quantities, which opens the door to the application of continuous mathematics to the analysis of network dynamics.</p>
<p>A key result of this approach is the &#8220;rate equation,&#8221; which gives a law of motion for the expected sizes of the populations.  <i>Equilibrium</i> can then be obtained by solving for zero motion.  The rate equations are applied in chemistry, where they give the rates of change of the concentrations of the various species in a reaction.</p>
<p>But before discussing the rate equation, here I will talk about the mathematical form of this law of motion, which consists of differential equations.  This form is naturally associated with deterministic systems involving continuous magnitudes.  This includes the equations of motion for the sine wave:</p>
<div align="center">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Simple_sine_wave.svg/200px-Simple_sine_wave.svg.png" />
</div>
<p>and the graceful ellipses that are traced out by the orbits of the planets around the sun: </p>
<div align="center">
<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Deuxi%C3%A8me_loi_de_Kepler.svg/200px-Deuxi%C3%A8me_loi_de_Kepler.svg.png" />
</div>
<p>This post provides some mathematical context to programmers who have not worked on scientific applications.  My goal is to get as many of you on board as possible, before setting sail with Petri net programming.</p>
<h3>Three approaches to equations: theoretical, formula-based, and computational</h3>
<p>Let&#8217;s first consider the major approaches to equations in general.  We&#8217;ll illustrate with a Diophantine equation</p>
<p><img src="https://s0.wp.com/latex.php?latex=x%5E9+%2B+y%5E9+%2B+z%5E9+%3D+2+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x^9 + y^9 + z^9 = 2 " class="latex" /></p>
<p>where <img src="https://s0.wp.com/latex.php?latex=x%2C+y&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x, y" class="latex" /> and <img src="https://s0.wp.com/latex.php?latex=z&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="z" class="latex" /> are integer variables.</p>
<p>In the <b>theoretical approach</b> (aka &#8220;qualitative analysis&#8221;), we start with the meaning of the equation and then proceed to reason about its solutions.  Here are some simple consequences of this equation.  They can&#8217;t all be zero, can&#8217;t all be positive, can&#8217;t all be negative, can&#8217;t all be even, and can&#8217;t all be odd.</p>
<p>In the <b>formula-based approach</b>, we seek formulas to describe the solutions.  Here is an example of a formula (which does not solve our equation):  </p>
<p><img src="https://s0.wp.com/latex.php?latex=%5C%7B%28x%2Cy%2Cz%29+%7C+x+%3D+n%5E3%2C+y+%3D+2n+-+4%2C+z+%3D+4+n+%7C+1+%5Cleq+n+%5Cleq+5+%5C%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;{(x,y,z) | x = n^3, y = 2n - 4, z = 4 n | 1 &#92;leq n &#92;leq 5 &#92;} " class="latex" /> </p>
<p>Such formulas are nice to have, but the pursuit of them is diabolically difficult.  In fact, for Diophantine equations, even the question of whether an arbitrarily chosen equation has any solutions whatsoever has been proven to be algorithmically undecidable.</p>
<p>Finally, in the <b>computational approach</b>, we seek algorithms to enumerate or numerically approximate the solutions to the equations.</p>
<h3>The three approaches to differential equations</h3>
<p>Let&#8217;s apply the preceding classification to differential equations.  </p>
<h4>Theoretical approach</h4>
<p>A <i>differential</i> equation is one that constrains the rates at which the variables are changing.  This can include constraints on the rates at which the rates are changing (second-order equations), etc.  The equation is <i>ordinary</i> if there is a single independent variable, such as time, otherwise it is <i>partial</i>.  </p>
<p>Consider the equation stating that a variable increases at a rate equal to its current value.  The bigger it gets, the faster it increases.  Given a starting value, this determines a process &mdash; the solution to the equation &mdash; which here is exponential growth.   </p>
<p>Let <img src="https://s0.wp.com/latex.php?latex=X%28t%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(t)" class="latex" /> be the value at time <img src="https://s0.wp.com/latex.php?latex=t%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="t," class="latex" /> and let&#8217;s initialize it to 1 at time 0.  So we have:</p>
<p><img src="https://s0.wp.com/latex.php?latex=X%280%29+%3D+1+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(0) = 1 " class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=X%27%28t%29+%3D+X%28t%29+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X&#039;(t) = X(t) " class="latex" /></p>
<p>These are first-order equations, because the derivative is applied at most once to any variable.  They are linear equations, because the terms on each side of the equations are linear combinations of either individual variables or derivatives (in this case all of the coefficients are 1).  Note also that a system of differential equations may in general have zero, one, or multiple solutions.  This example belongs to a class of equations which are proven to have a unique solution for each initial condition.  </p>
<p>You could imagine more complex systems of equations, involving multiple dependent variables, all still depending on time.  That includes the rate equations for a Petri net, which have one dependent variable for each of the population sizes.  The ideas for such systems are an extension of the ideas for a single-variable system.  Then, a state of the system is a vector of values, with one component for each of the dependent variables.  For first-order systems, such as the rate equations, where the derivatives appear on the left-hand sides, the equations determine, for each possible state of the system, a &#8220;direction&#8221; and rate of change for the state of the system.</p>
<p>Now here is a simple illustration of what I called the theoretical approach.  Can <img src="https://s0.wp.com/latex.php?latex=X%28t%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(t)" class="latex" /> ever become negative?  No, because it starts out positive at time 0, and in order to later become negative, it must be decreasing at a time <img src="https://s0.wp.com/latex.php?latex=t_1&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="t_1" class="latex" /> when it is still positive.  That is to say, <img src="https://s0.wp.com/latex.php?latex=X%28t_1%29+%3E+0&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(t_1) &gt; 0" class="latex" />, and <img src="https://s0.wp.com/latex.php?latex=X%27%28t_1%29+%3C+0&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X&#039;(t_1) &lt; 0" class="latex" />.  But that contradicts the assumption <img src="https://s0.wp.com/latex.php?latex=X%27%28t%29+%3D+X%28t%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X&#039;(t) = X(t)" class="latex" />.  The general lesson here is that we don&#8217;t need a solution formula in order to make such inferences.  </p>
<p>For the rate equations, the theoretical approach leads to substantial theorems about the existence and structure of equilibrium solutions.  </p>
<h4>Formula-based approach</h4>
<p>It is natural to look for concise formulas to solve our equations, but the results of this overall quest are largely negative.  The exponential differential equation cannot be solved by any formula that involves a finite combination of simple operations.  So the solution function must be treated as a new primitive, and given a name, say <img src="https://s0.wp.com/latex.php?latex=%5Cexp%28t%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;exp(t)" class="latex" />.  But even when we extend our language to include this new symbol, there are many differential equations that remain beyond the reach of finite formulas.  So an endless collection of primitive functions is called for.  (As standard practice, we always include <img src="https://s0.wp.com/latex.php?latex=exp%28t%29%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="exp(t)," class="latex" /> and its complex extensions to the trigonometric functions, as primitives in our toolbox.)  </p>
<p>But the hard mathematical reality does not end here, because even when solution formulas do exist, finding them may call for an ace detective.  Only for certain classes of differential equations, such as the linear ones, do we have systematic solution methods.  </p>
<p>The picture changes, however, if we let the formulas contain an infinite number of operations.  Then the arithmetic operators give a far-reaching base for defining new functions.  In fact, as you can verify, the power series</p>
<p><img src="https://s0.wp.com/latex.php?latex=X%28t%29+%3D+1+%2B+t+%2B+t%5E2%2F2%21+%2B+t%5E3%2F3%21+%2B+...+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(t) = 1 + t + t^2/2! + t^3/3! + ... " class="latex" /></p>
<p>which we view as an &#8220;infinite polynomial&#8221; over the time parameter t, exactly satisfies our equations for exponential motion, <img src="https://s0.wp.com/latex.php?latex=X%280%29+%3D+1&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(0) = 1" class="latex" /> and <img src="https://s0.wp.com/latex.php?latex=X%27%28t%29+%3D+X%28t%29.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X&#039;(t) = X(t)." class="latex" />  This power series therefore <i>defines</i> <img src="https://s0.wp.com/latex.php?latex=%5Cexp%28t%29.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;exp(t)." class="latex" />  By the way, applying it to the input 1 produces a definition for the transcendental number <img src="https://s0.wp.com/latex.php?latex=e&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="e" class="latex" />:</p>
<p><img src="https://s0.wp.com/latex.php?latex=e+%3D+X%281%29+%3D+1+%2B+1+%2B+1%2F2+%2B+1%2F6+%2B+1%2F24+%2B+1%2F120+%2B+...+%5Capprox+2.71828+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="e = X(1) = 1 + 1 + 1/2 + 1/6 + 1/24 + 1/120 + ... &#92;approx 2.71828 " class="latex" /></p>
<h4>Computational approach</h4>
<p>Let&#8217;s leave aside our troubles with formulas, and consider the computational approach.  For broad classes of differential equations, there are approximation algorithms that be successfully applied.</p>
<p>For starters, any power series that satisfies a differential equation may work for a simple approximation method.  If a series is known to converge over some range of inputs, then one can approximate the value at those points by stopping the computation after a finite number of terms.</p>
<p>But the standard methods work directly with the equations, provided that they can be put into the right form.  The simplest one is called Euler&#8217;s method.  It works over a sampling grid of points separated by some small number <img src="https://s0.wp.com/latex.php?latex=%5Cepsilon&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;epsilon" class="latex" />.  Let&#8217;s take the case where we have a first-order equation in explicit form, which means that <img src="https://s0.wp.com/latex.php?latex=X%27%28t%29+%3D+f%28X%28t%29%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X&#039;(t) = f(X(t))" class="latex" /> for some function <img src="https://s0.wp.com/latex.php?latex=f.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="f." class="latex" /></p>
<p>We begin with the initial value <img src="https://s0.wp.com/latex.php?latex=X%280%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(0)" class="latex" />.  Applying <img src="https://s0.wp.com/latex.php?latex=f%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="f," class="latex" /> we get <img src="https://s0.wp.com/latex.php?latex=X%27%280%29+%3D+f%28X%280%29%29.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X&#039;(0) = f(X(0))." class="latex" />  Then for the interval from 0 to <img src="https://s0.wp.com/latex.php?latex=%5Cepsilon&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;epsilon" class="latex" />,we use a linear approximation for <img src="https://s0.wp.com/latex.php?latex=X%28t%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(t)" class="latex" />, by assuming that the derivative remains constant at <img src="https://s0.wp.com/latex.php?latex=X%27%280%29.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X&#039;(0)." class="latex" />  That gives <img src="https://s0.wp.com/latex.php?latex=X%28%5Cepsilon%29+%3D+X%280%29+%2B+%5Cepsilon+%5Ccdot+X%27%280%29.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(&#92;epsilon) = X(0) + &#92;epsilon &#92;cdot X&#039;(0)." class="latex" />  Next, <img src="https://s0.wp.com/latex.php?latex=X%27%28%5Cepsilon%29+%3D+f%28X%28%5Cepsilon%29%29%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X&#039;(&#92;epsilon) = f(X(&#92;epsilon))," class="latex" /> and <img src="https://s0.wp.com/latex.php?latex=X%282+%5Cepsilon%29+%3D+X%28%5Cepsilon%29+%2B+%5Cepsilon+%5Ccdot+X%27%28%5Cepsilon%29%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(2 &#92;epsilon) = X(&#92;epsilon) + &#92;epsilon &#92;cdot X&#039;(&#92;epsilon)," class="latex" /> etc.   Formally,</p>
<p><img src="https://s0.wp.com/latex.php?latex=X%280%29+%3D+%5Ctextrm%7Binitial%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(0) = &#92;textrm{initial} " class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=X%28%28n%2B1%29+%5Cepsilon%29+%3D+X%28n+%5Cepsilon%29+%2B+%5Cepsilon+f%28X%28n+%5Cepsilon%29%29+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X((n+1) &#92;epsilon) = X(n &#92;epsilon) + &#92;epsilon f(X(n &#92;epsilon)) " class="latex" /></p>
<p>Applying this to our exponential equation, where <img src="https://s0.wp.com/latex.php?latex=f%28X%28t%29%29+%3D+X%28t%29%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="f(X(t)) = X(t)," class="latex" /> we get:</p>
<p><img src="https://s0.wp.com/latex.php?latex=X%280%29+%3D+1+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(0) = 1 " class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=X%28%28n%2B1%29+%5Cepsilon%29+%3D+X%28n+%5Cepsilon%29+%2B+%5Cepsilon+X%28n+%5Cepsilon%29+%3D+X%28n+%5Cepsilon%29+%281+%2B+%5Cepsilon%29+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X((n+1) &#92;epsilon) = X(n &#92;epsilon) + &#92;epsilon X(n &#92;epsilon) = X(n &#92;epsilon) (1 + &#92;epsilon) " class="latex" /></p>
<p>Hence:</p>
<p><img src="https://s0.wp.com/latex.php?latex=X%28n+%5Cepsilon%29+%3D+%281+%2B+%5Cepsilon%29+%5E+n&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X(n &#92;epsilon) = (1 + &#92;epsilon) ^ n" class="latex" /></p>
<p>So the approximation method gives a discrete exponential growth, which converges to a continuous exponential in the limit as the mesh size goes to zero.</p>
<p>Note, the case we just considered has more generality than might appear at first, because (1) the ideas here are easily extended to systems of explicit first order equations, and (2) higher-order equations that are &#8220;explicit&#8221; in an extended sense&#8212;meaning that the highest-order derivative is expressed as a function of time, of the variable, and of the lower-order derivatives&#8212;can be converted into an equivalent system of explicit first-order equations.</p>
<h3>The challenging world of differential equations</h3>
<p>So, is our cup half-empty or half-full?  We have no toolbox of primitive formulas for building the solutions to all differential equations by finite compositions.  And even for those which can be solved by formulas, there is no general method for finding the solutions.  That is how the cookie crumbles.  But on the positive side, there is an array of theoretical tools for analyzing and solving important classes of differential equations, and numerical methods can be applied in many cases.  </p>
<p>The study of differential equations leads to some challenging problems, such as the Navier-Stokes equations, which describe the flow of fluids.  </p>
<div align="center">
<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Bubble_Buoyancy.svg/200px-Bubble_Buoyancy.svg.png" />
</div>
<p>These are partial differential equations involving flow velocity, pressure, density and external forces (such as gravity), all of which vary over space and time.  There are non-linear (multiplicative) interactions between these variables and their spatial and temporal derivatives, which leads to complexity in the solutions.</p>
<p>At high flow rates, this complexity can produce chaotic solutions, which involve complex behavior at a wide range of resolution scales.  This is <i>turbulence</i>.  Here is an insightful portrait of turbulence, by Leonardo da Vinci, whose studies in turbulence date back to the 15th Century.</p>
<div align="center">
<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Etudes_turbulences_-_L%C3%A9onard_de_Vinci.jpg/256px-Etudes_turbulences_-_L%C3%A9onard_de_Vinci.jpg" />
</div>
<p>Turbulence, which has been described by Richard Feynman as the most important unsolved problem of classical physics, also presents a mathematical puzzle.  The general existence of solutions to the Navier-Stokes equations remains unsettled.  This is one of the &#8220;<a href="http://www.claymath.org/millennium/">Millennium Prize Problems&#8221;</a>, for which a one million dollar prize is offered:  in three dimensions, given initial values for the velocity and scalar fields, does there exist a solution that is smooth and everywhere defined?  There are also complications with grid-based numerical methods, which will fail to produce globally accurate results if the solutions contain details at a smaller scale than the grid mesh.  So the ubiquitous phenomenon of turbulence, which is so basic to the movements of the atmosphere and the seas, remains an open case.</p>
<p>But fortunately we have enough traction with differential equations to proceed directly with the rate equations for Petri nets.   There we will find illuminating equations, which are the subject of both major theorems and open problems.  They are non-linear and intractable by formula-based methods, yet, as we will see, they are well handled by numerical methods.  </p>
									</div>

				<p class="postmetadata">
				<img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/speech_bubble.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2013/04/19/petri-net-programming-part-3/#comments">11 Comments</a>				| <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/documents.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/category/mathematics/" rel="category tag">mathematics</a>, <a href="https://johncarlosbaez.wordpress.com/category/networks/" rel="category tag">networks</a>, <a href="https://johncarlosbaez.wordpress.com/category/software/" rel="category tag">software</a>								 | <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/permalink.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2013/04/19/petri-net-programming-part-3/" rel="bookmark" title="Permanent Link to Petri Net Programming (Part&nbsp;3)">Permalink</a>
<br /><img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/figure_ver1.gif" alt="" /> Posted by John Baez				</p>
			</div>
			<hr />
		
			<div class="post-13577 post type-post status-publish format-standard hentry category-chemistry category-networks category-oceans category-probability category-software" id="post-13577">
				<h2><a href="https://johncarlosbaez.wordpress.com/2012/12/20/petri-net-programming-part-2/" rel="bookmark">Petri Net Programming (Part&nbsp;2)</a></h2>
				<small>20 December, 2012</small><br />


				<div class="entry">
					<p><i>guest post by <b><a href="http://www.azimuthproject.org/azimuth/show/David+Tanzer">David A. Tanzer</a></b></i></p>
<h3>An introduction to stochastic Petri nets</h3>
<p>In the <a href="https://johncarlosbaez.wordpress.com/2012/10/01/petri-net-programming/">previous article</a>, I explored a simple computational model called Petri nets.  They are used to model reaction networks, and have applications in a wide variety of fields, including population ecology, gene regulatory networks, and chemical reaction networks.  I presented a simulator program for Petri nets, but it had an important limitation:  the model and the simulator contain no notion of the <i>rates</i> of the reactions.  But these rates critically determine the character of the dynamics of network.</p>
<p>Here I will introduce the topic of &#8216;stochastic Petri nets,&#8217; which extends the basic model to include reaction dynamics.  Stochastic means random, and it is presumed that there is an underlying <i>random process</i> that drives the reaction events.   This topic is rich in both its mathematical foundations and its practical applications.  A direct application of the theory yields the rate equation for chemical reactions, which is a cornerstone of chemical reaction theory.  The theory also gives algorithms for analyzing and simulating Petri nets.</p>
<p>We are now entering the &#8216;business&#8217; of software development for applications to science.  The business logic here is nothing but math and science itself.  Our study of this logic is not an academic exercise that is tangential to the implementation effort.  Rather, it is the first phase of a <i>complete</i> software development process for scientific programming applications.</p>
<p>The end goals of this series are to develop working code to analyze and simulate Petri nets, and to apply these tools to informative case studies.  But we have some work to do <i>en route</i>, because we need to truly understand the models in order to properly interpret the algorithms.   The key questions here are when, why, and to what extent the algorithms give results that are empirically predictive.  We will therefore be embarking on some exploratory adventures into the relevant theoretical foundations.  </p>
<p>The overarching subject area to which stochastic Petri nets belong has been described as <i>stochastic mechanics</i> in the <a href="http://math.ucr.edu/home/baez/networks/">network theory</a> series here on Azimuth.  The theme development here will partly parallel that of the network theory series, but with a different focus, since I am addressing a computationally oriented reader.  For an excellent text on the foundations and applications of stochastic mechanics, see:</p>
<p>&bull; Darren Wilkinson, <i>Stochastic Modelling for Systems Biology</i>, Chapman and Hall/CRC Press, Boca Raton, Florida, 2011.</p>
<h3>Review of basic Petri nets</h3>
<p>A Petri net is a graph with two kinds of nodes: species and transitions.  The net is populated with a collection of &#8216;tokens&#8217; that represent individual entities.   Each token is attached to one of the species nodes, and this attachment indicates the type of the token.   We may therefore view a species node as a container that holds all of the tokens of a given type.   </p>
<p>The transitions represent conversion reactions between the tokens.  Each transition is &#8216;wired&#8217; to a collection of input species-containers, and to a collection of output containers.   When it &#8216;fires&#8217;, it removes one token from each input container, and deposits one token to each output container. </p>
<p>Here is the example we gave, for a simplistic model of the formation and dissociation of H<sub>2</sub>O molecules:</p>
<div align="center">
<img width="450" src="https://i2.wp.com/math.ucr.edu/home/baez/networks/pictures/H2O-example.png" /></div>
<p>The circles are for species, and the boxes are for transitions.</p>
<p>The transition <b>combine</b> takes in two H tokens and one O token, and outputs one H<sub>2</sub>O token.  The reverse transition is <b>split</b>, which takes in one H<sub>2</sub>O, and outputs two H&#8217;s and one O.</p>
<p>An important application of Petri nets is to the modeling of <i>biochemical</i> reaction networks, which include the gene regulatory networks.  Since genes and enzymes are molecules, and their binding interactions are chemical reactions, the Petri net model is directly applicable.  For example, consider a transition that inputs one gene G, one enzyme E, and outputs the molecular form G &bull; E in which E is bound to a particular site on G.</p>
<p>Applications of Petri nets may differ widely in terms of the population sizes involved in the model.  In general chemistry reactions, the populations are measured in units of moles (where a mole is &#8216;Avogadro&#8217;s number&#8217; 6.022 &middot; 10<sup>23</sup> entities).  In gene regulatory networks, on the other hand, there may only be a handful of genes and enzymes involved in a reaction.  </p>
<p>This difference in scale leads to a qualitative difference in the modelling.  With small population sizes, the stochastic effects will predominate, but with large populations, a continuous, deterministic, average-based approximation can be used.</p>
<h3>Representing Petri nets by reaction formulas</h3>
<p>Petri nets can also be represented by formulas used for chemical reaction networks.  Here is the formula for the Petri net shown above:</p>
<p>H<sub>2</sub>O &harr; H + H + O</p>
<p>or the more compact:</p>
<p>H<sub>2</sub>O &harr; 2 H + O</p>
<p>The double arrow is a compact designation for <i>two</i> separate reactions, which happen to be opposites of each other.</p>
<p>By the way, this reaction is not physically realistic, because one doesn&#8217;t find isolated H and O atoms traveling around and meeting up to form water molecules.  This is the actual reaction pair that predominates in water:</p>
<p>2 H<sub>2</sub>O &harr; OH<sup>&#8211;</sup> + H<sub>3</sub>O<sup>+</sup></p>
<p>Here, a hydrogen nucleus H<sup>+</sup>, with one unit of positive charge, gets removed from one of the H<sub>2</sub>O molecules, leaving behind the <a href="http://en.wikipedia.org/wiki/Hydroxide"><b>hydroxide</b></a> ion OH<sup>&#8211;</sup>.  In the same stroke, this H<sup>+</sup> gets re-attached to the other H<sub>2</sub>O molecule, which thereby becomes a <a href="http://en.wikipedia.org/wiki/Hydronium"><b>hydronium</b></a> ion, H<sub>3</sub>O<sup>+</sup>.</p>
<p>For a more detailed example, consider this reaction chain, which is of concern to the ocean environment:</p>
<p>CO<sub>2</sub> + H<sub>2</sub>O &harr; H<sub>2</sub>CO<sub>3</sub> &harr; H<sup>+</sup> + HCO<sub>3</sub><sup>&#8211;</sup></p>
<p>This shows the formation of <a href="http://en.wikipedia.org/wiki/Carbonic_acid"><b>carbonic acid</b></a>, namely H<sub>2</sub>CO<sub>3</sub>, from water and carbon dioxide.  The next reaction represents the splitting of carbonic acid into a hydrogen ion and a negatively charged <a href="http://en.wikipedia.org/wiki/Bicarbonate"><b>bicarbonate ion</b></a>, HCO<sub>3</sub><sup>&#8211;</sup>.  There is a further reaction, in which a bicarbonate ion further ionizes into an H<sup>+</sup> and a doubly negative <a href="http://en.wikipedia.org/wiki/Carbonate"><b>carbonate ion</b></a> CO<sub>3</sub><sup>2-</sup>.   As the diagram indicates, for each of these reactions, a reverse reaction is also present.   For a more detailed description of this reaction network, see:</p>
<p>&bull; Stephen E. Bialkowski, <a href="http://ion.chem.usu.edu/~sbialkow/Classes/3650/Carbonate/Carbonic%20Acid.html">Carbon dioxide and carbonic acid</a>.</p>
<p>Increased levels of CO<sub>2</sub> in the atmosphere will change the balance of these reactions, leading to a higher concentration of hydrogen ions in the water, i.e., a more acidic ocean.  This is of concern because the metabolic processes of aquatic organisms is sensitive to the pH level of the water.   The ultimate concern is that entire food chains could be disrupted, if some of the organisms cannot survive in a higher pH environment.  See the Wikipedia page on <a href="http://en.wikipedia.org/wiki/Ocean_acidification">ocean acidification</a> for more information.</p>
<p><b>Exercise.</b> Draw Petri net diagrams for these reaction networks.</p>
<h3>Motivation for the study of Petri net dynamics</h3>
<p>The relative rates of the various reactions in a network critically determine the qualitative dynamics of the network as a whole.  This is because the reactions are &#8216;competing&#8217; with each other, and so their relative rates determine the direction in which the state of the system is changing.  For instance, if molecules are breaking down faster then they are being formed, then the system is moving towards full dissociation.  When the rates are equal, the processes balance out, and the system is in an equilibrium state.  Then, there are only temporary fluctuations around the equilibrium conditions.   </p>
<p>The rate of the reactions will depend on the number of tokens present in the system.  For example, if any of the input tokens are zero, then the transition can&#8217;t fire, and so its rate must be zero.  More generally, when there are few input tokens available, there will be fewer reaction events, and so the firing rates will be lower.</p>
<p>Given a specification for the rates in a reaction network, we can then pose the following kinds of questions about its dynamics:</p>
<p>&bull; Does the network have an equilibrium state? </p>
<p>&bull; If so, what are the concentrations of the species at equilibrium?  </p>
<p>&bull; How quickly does it approach the equilibrium? </p>
<p>&bull; At the equilibrium state, there will still be temporary fluctuations around the equilibrium concentrations.  What are the variances of these fluctuations? </p>
<p>&bull; Are there modes in which the network will oscillate between states? </p>
<p>This is the grail we seek.  </p>
<p>Aside from actually performing empirical experiments, such questions can be addressed either analytically or through simulation methods.  In either case, our first step is to define a theoretical model for the dynamics of a Petri net.</p>
<h3>Stochastic Petri nets</h3>
<p>A <b>stochastic Petri net</b> (with kinetics) is a Petri net that is augmented with a specification for the reaction dynamics.  It is defined by the following:  </p>
<p>&bull; An <b>underlying Petri net</b>, which consists of species, transitions, an input map, and an output map.  These maps assign to each transition a multiset of species.  (Multiset means that duplicates are allowed.)  Recall that the state of the net is defined by a <i>marking</i> function, that maps each species to its population count.</p>
<p>&bull; A <b>rate constant</b> that is associated with each transition.</p>
<p>&bull; A <b>kinetic model</b>, that gives the expected firing rate for each transition as a function of the current marking.  Normally, this kinetic function will include the rate constant as a multiplicative factor.</p>
<p>A further &#8216;sanity constraint&#8217; can be put on the kinetic function for a transition:  it should give a positive value if and only if all of its inputs are positive.</p>
<p>&bull; A <b>stochastic model</b>, which defines the probability distribution of the time intervals between firing events.  This specific distribution of the firing intervals for a transition will be a function of the expected firing rate in the current marking.</p>
<p>This definition is based on the standard treatments found, for example in:</p>
<p>&bull; M. Ajmone Marsan, <a href="http://www.fd.cvut.cz/department/k611/pedagog/tho_a/a_soubory/spn_introduction.pdf">Stochastic Petri nets: an elementary introduction</a>, in <i>Advances in Petri Nets</i>, Springer, Berlin, 1989, 1&#8211;23.</p>
<p>or Wilkinson&#8217;s book mentioned above.  I have also added an explicit mention of the kinetic model, based on the &#8216;kinetics&#8217; described in here:</p>
<p>&bull; Martin Feinberg, <a href="http://www.chbmeng.ohio-state.edu/~feinberg/LecturesOnReactionNetworks">Lectures on chemical reaction networks</a>.</p>
<p>There is an implied <i>random process</i> that drives the reaction events.  A classical random process is given by a container with &#8216;particles&#8217; that are randomly traveling around, bouncing off the walls, and colliding with each other.  This is the general idea behind  Brownian motion.  It is called a random process because the outcome results from an &#8216;experiment&#8217; that is not fully determined by the input specification.   In this experiment, you pour in the ingredients (particles of different types), set the temperature (the distributions of the velocities), give it a stir, and then see what happens.  The outcome consists of the paths taken by each of the particles.   </p>
<p>In an important limiting case, the stochastic behavior becomes deterministic, and the population sizes become continuous.  To see this, consider a graph of population sizes over time.  With larger population sizes, the relative jumps caused by the firing of individual transitions become smaller, and graphs look more like continuous curves.  In the limit, we obtain an approximation for high population counts, in which the graphs are continuous curves, and the concentrations are treated as continuous magnitudes.  In a similar way, a pitcher of sugar can be approximately viewed as a continuous fluid.  </p>
<p>This simplification permits the application of continuous mathematics to study of reaction network processes.  It leads to the basic <i>rate equation</i> for reaction networks, which specifies the direction of change of the system as a function of the current state of the system.  </p>
<p>In this article we will be exploring this continuous deterministic formulation of Petri nets, under what is known as the mass action kinetics.  This kinetics is one implementation of the general specification of a kinetic model, as defined above.  This means that it will define the <i>expected</i> firing rate of each transition, in a given marking of the net.  The probabilistic variations in the spacing of the reactions&#8212;around the mean given by the expected firing rate&#8212;is part of the stochastic dynamics, and will be addressed in a subsequent article. </p>
<h3>The mass-action kinetics</h3>
<p>Under the <b>mass action kinetics</b>, the expected firing rate of a transition is proportional to the product of the concentrations of its input species.   For instance, if the reaction were A + C &rarr; D, then the firing rate would be proportional to the concentration of A times the concentration of C, and if the reaction were A + A &rarr; D, it would be proportional to the square of the concentration of A.   </p>
<p>This principle is explained by Feinberg as follows:  </p>
<blockquote><p>For the reaction A+C &rarr; D, an occurrence requires that a molecule of A meet a molecule of C in the reaction, and we take the probability of such an encounter to be proportional to the product [of the concentrations of A and C].   Although we do not presume that every such encounter yields a molecule of D, we nevertheless take the occurrence rate of A+C &rarr; D to be governed by [the product of the concentrations].
</p></blockquote>
<p>For an in-depth proof of the mass action law, see this article:</p>
<p>&bull; Daniel Gillespie, <a href="http://citeseerx.ist.psu.edu/viewdoc/summary/?doi=10.1.1.159.5220">A rigorous definition of the chemical master equation</a>, 1992.</p>
<p>Note that we can easily pass back and forth between speaking of the population counts for the species, and the concentrations of the species, which is just the population count divided by the total volume V of the system.  The mass action law applies to both cases, the only difference being that the constant factors of (1/V) used for concentrations will get absorbed into the rate constants.</p>
<p>The mass action kinetics is a basic law of empirical chemistry.  But there are limits to its validity.  First, as indicated in the proof in the Gillespie, the mass action law rests on the assumptions that the system is well-stirred and in thermal equilibrium.  Further limits are discussed here:</p>
<p>&bull; Georg Job and Regina Ruffler, <a href="http://job-stiftung.de/pdf/buch/physical_chemistry_five_chapters.pdf"><i>Physical Chemistry</i></a> (first five chapters), Section 5.2, 2010.</p>
<p>They write:</p>
<blockquote><p> &#8230;precise measurements show that the relation above is not strictly adhered to. At higher concentrations, values depart quite noticeably from this relation. If we gradually move to lower concentrations, the differences become smaller. The equation here expresses a so-called “limiting law“ which strictly applies only when c &rarr; 0.
</p></blockquote>
<blockquote><p> In practice, this relation serves as a useful approximation up to rather high concentrations. In the case of electrically neutral substances, deviations are only noticeable above 100 mol m<sup>−3</sup>.  For ions, deviations become observable above 1 mol m<sup>−3</sup>, but they are so small that they are easily neglected if accuracy is not of prime concern.
</p></blockquote>
<p>Why would the mass action kinetics break down at high concentrations?  According to the book quoted, it is due to &#8220;molecular and ionic interactions.&#8221;  I haven&#8217;t yet found a more detailed explanation, but here is my supposition about what is meant by molecular interactions in this context.  Doubling the number of A molecules doubles the number of expected collisions between A and C molecules, but it also reduces the probability that any given A and C molecules that are within reacting distance will actually react.  The reaction probability is reduced because the A molecules are &#8216;competing&#8217; for reactions with the C molecules.  With more A molecules, it becomes more likely that a C molecule will simultaneously be within reacting distance of several A molecules; each of these A molecules reduces the probability that the other A molecules will react with the C molecule.   This is most pronounced when the concentrations in a gas get high enough that the molecules start to pack together to form a liquid.  </p>
<h3>The equilibrium relation for a pair of opposite reactions</h3>
<p>Suppose we have two opposite reactions:</p>
<p><img src="https://s0.wp.com/latex.php?latex=T%3A+A+%2B+B+%5Cstackrel%7Bu%7D%7B%5Clongrightarrow%7D+C+%2B+D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="T: A + B &#92;stackrel{u}{&#92;longrightarrow} C + D " class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=T%27%3A+C+%2B+D+%5Cstackrel%7Bv%7D%7B%5Clongrightarrow%7D+A+%2B+B+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="T&#039;: C + D &#92;stackrel{v}{&#92;longrightarrow} A + B " class="latex" /></p>
<p>Since the reactions have exactly opposite effects on the population sizes, in order for the population sizes to be in a stable equilibrium, the expected firing rates of <img src="https://s0.wp.com/latex.php?latex=T&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="T" class="latex" /> and <img src="https://s0.wp.com/latex.php?latex=T%27&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="T&#039;" class="latex" /> must be equal: </p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cmathrm%7Brate%7D%28T%27%29+%3D+%5Cmathrm%7Brate%7D%28T%29+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;mathrm{rate}(T&#039;) = &#92;mathrm{rate}(T) " class="latex" /></p>
<p>By mass action kinetics: </p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cmathrm%7Brate%7D%28T%29+%3D+u+%5BA%5D+%5BB%5D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;mathrm{rate}(T) = u [A] [B] " class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cmathrm%7Brate%7D%28T%27%29+%3D+v+%5BC%5D+%5BD%5D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;mathrm{rate}(T&#039;) = v [C] [D] " class="latex" /></p>
<p>where <img src="https://s0.wp.com/latex.php?latex=%5BX%5D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="[X]" class="latex" /> means the concentration of <img src="https://s0.wp.com/latex.php?latex=X.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X." class="latex" /></p>
<p>Hence at equilibrium:</p>
<p><img src="https://s0.wp.com/latex.php?latex=u+%5BA%5D+%5BB%5D+%3D+v+%5BC%5D+%5BD%5D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="u [A] [B] = v [C] [D] " class="latex" /></p>
<p>So:</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B+%5Cfrac%7B%5BA%5D%5BB%5D%7D%7B%5BC%5D%5BD%5D%7D+%3D+%5Cfrac%7Bv%7D%7Bu%7D+%3D+K+%7D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{ &#92;frac{[A][B]}{[C][D]} = &#92;frac{v}{u} = K }" class="latex" /></p>
<p>where <img src="https://s0.wp.com/latex.php?latex=K&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="K" class="latex" /> is the equilibrium constant for the reaction pair.  </p>
<h3>Equilibrium solution for the formation and dissociation of a diatomic molecule</h3>
<p>Let A be some type of atom, and let D = A<sub>2</sub> be the diatomic form of A.  Then consider the opposite reactions:</p>
<p><img src="https://s0.wp.com/latex.php?latex=A+%2B+A+%5Cstackrel%7Bu%7D%7B%5Clongrightarrow%7D+D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="A + A &#92;stackrel{u}{&#92;longrightarrow} D " class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=D+%5Cstackrel%7Bv%7D%7B%5Clongrightarrow%7D+A+%2B+A+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="D &#92;stackrel{v}{&#92;longrightarrow} A + A " class="latex" /></p>
<p>From the preceding analysis, at equilibrium the following relation holds:</p>
<p><img src="https://s0.wp.com/latex.php?latex=u+%5BA%5D%5E2+%3D+v+%5BD%5D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="u [A]^2 = v [D] " class="latex" /></p>
<p>Let <img src="https://s0.wp.com/latex.php?latex=N%28A%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="N(A)" class="latex" /> and <img src="https://s0.wp.com/latex.php?latex=N%28B%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="N(B)" class="latex" /> be the population counts for A and B, and let</p>
<p><img src="https://s0.wp.com/latex.php?latex=N+%3D+N%28A%29+%2B+2+N%28D%29+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="N = N(A) + 2 N(D) " class="latex" /></p>
<p>be the total number of units of A in the system, whether they be in the form of atoms or diatoms.</p>
<p>The value of <img src="https://s0.wp.com/latex.php?latex=N&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="N" class="latex" /> is an invariant property of the system.  The reactions cannot change it, because they are just shuffling the units of A from one arrangement to the other.  By way of contrast, <img src="https://s0.wp.com/latex.php?latex=N%28A%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="N(A)" class="latex" /> is not an invariant quantity.</p>
<p>Dividing this equation by the total volume <img src="https://s0.wp.com/latex.php?latex=V&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="V" class="latex" />, we get:</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5BN%5D+%3D+%5BA%5D+%2B+2+%5BD%5D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="[N] = [A] + 2 [D] " class="latex" /></p>
<p>where <img src="https://s0.wp.com/latex.php?latex=%5BN%5D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="[N]" class="latex" /> is the concentration of the units of A.</p>
<p>Given a fixed value for <img src="https://s0.wp.com/latex.php?latex=%5BN%5D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="[N]" class="latex" /> and the rate constants <img src="https://s0.wp.com/latex.php?latex=u&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="u" class="latex" /> and <img src="https://s0.wp.com/latex.php?latex=v&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="v" class="latex" />, we can then solve for the concentrations at equilibrium:</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7Bu+%5BA%5D%5E2+%3D+v+%5BD%5D+%3D+v+%28%5BN%5D+-+%5BA%5D%29+%2F+2+%7D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{u [A]^2 = v [D] = v ([N] - [A]) / 2 }" class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B2+u+%5BA%5D%5E2+%2B+v+%5BA%5D+-+v+%5BN%5D+%3D+0+%7D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{2 u [A]^2 + v [A] - v [N] = 0 }" class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B%5BA%5D+%3D+%28-v+%5Cpm+%5Csqrt%7Bv%5E2+%2B+8+u+v+%5BN%5D%7D%29+%2F+4+u+%7D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{[A] = (-v &#92;pm &#92;sqrt{v^2 + 8 u v [N]}) / 4 u }" class="latex" /></p>
<p>Since <img src="https://s0.wp.com/latex.php?latex=%5BA%5D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="[A]" class="latex" /> can&#8217;t be negative, only the positive square root is valid.</p>
<p>Here is the solution for the case where <img src="https://s0.wp.com/latex.php?latex=u+%3D+v+%3D+1&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="u = v = 1" class="latex" />:</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B%5BA%5D+%3D+%28%5Csqrt%7B8+%5BN%5D+%2B+1%7D+-+1%29+%2F+4+%7D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{[A] = (&#92;sqrt{8 [N] + 1} - 1) / 4 }" class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B%5BD%5D+%3D+%28%5BN%5D+-+%5BA%5D%29+%2F+2+%7D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{[D] = ([N] - [A]) / 2 }" class="latex" /></p>
<h3>Conclusion</h3>
<p>We&#8217;ve covered a lot of ground, starting with the introduction of the stochastic Petri net model, followed by a general discussion of reaction network dynamics, the mass action laws, and calculating equilibrium solutions for simple reaction networks. </p>
<p>We still have a number of topics to cover on our journey into the foundations, before being able to write <i>informed</i> programs to solve problems with stochastic Petri nets.   Upcoming topics are (1) the deterministic rate equation for general reaction networks and its application to finding equilibrium solutions, and (2) an exploration of the <i>stochastic</i> dynamics of a Petri net.  These are the themes that will support our upcoming software development.</p>
									</div>

				<p class="postmetadata">
				<img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/speech_bubble.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2012/12/20/petri-net-programming-part-2/#comments">15 Comments</a>				| <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/documents.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/category/chemistry/" rel="category tag">chemistry</a>, <a href="https://johncarlosbaez.wordpress.com/category/networks/" rel="category tag">networks</a>, <a href="https://johncarlosbaez.wordpress.com/category/oceans/" rel="category tag">oceans</a>, <a href="https://johncarlosbaez.wordpress.com/category/probability/" rel="category tag">probability</a>, <a href="https://johncarlosbaez.wordpress.com/category/software/" rel="category tag">software</a>								 | <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/permalink.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2012/12/20/petri-net-programming-part-2/" rel="bookmark" title="Permanent Link to Petri Net Programming (Part&nbsp;2)">Permalink</a>
<br /><img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/figure_ver1.gif" alt="" /> Posted by John Baez				</p>
			</div>
			<hr />
		
			<div class="post-12315 post type-post status-publish format-standard hentry category-networks category-software" id="post-12315">
				<h2><a href="https://johncarlosbaez.wordpress.com/2012/10/01/petri-net-programming/" rel="bookmark">Petri Net Programming (Part&nbsp;1)</a></h2>
				<small>1 October, 2012</small><br />


				<div class="entry">
					<p><i>guest post by <b><a href="http://www.azimuthproject.org/azimuth/show/David+Tanzer">David Tanzer</a></b></i></p>
<p>Petri nets are a simple model of computation with a range of modelling applications that include chemical reaction networks, manufacturing processes, and population biology dynamics.  They are graphs through which entities flow and have their types transformed.  They also have far-reaching mathematical properties which are the subject of an extensive literature.  See the <a href="http://math.ucr.edu/home/baez/networks/">network theory</a> series here on Azimuth for a panoramic and well-diagrammed introduction to the theory and applications of Petri nets.</p>
<p>In this article, I will introduce Petri nets and give an expository presentation of a program to simulate them.  I am hoping that this will be of interest to anyone who wants to see how scientific concepts can be formulated and actualized in computer software.  Here the simulator program will be applied to a &#8220;toy model&#8221; of a chemical reaction network for the synthesis and dissociation of H<sub>2</sub>O molecules.  The source code for this program should give the reader some &#8220;clay&#8221; to work with.   </p>
<p>This material will prepare you for the further topic of <i>stochastic</i> Petri nets, where the sequencing of the Petri net is probabilistically controlled. </p>
<h3> Definition of Petri nets </h3>
<p>A <b>Petri net</b> is a diagram with two kinds of nodes: container nodes, called <b>species</b> (or &#8220;places&#8221;, &#8220;states&#8221;), which can hold zero or more <b>tokens</b>, and <b>transition</b> nodes, which are &#8220;wired&#8221; to some containers called its <b>inputs</b> and some called its <b>outputs</b>.  A transition can have multiple input or output connections to a single container.   </p>
<p>When a transition <b>fires</b>, it removes one token from each input container, and adds one token to each output container.  When there are multiple inputs or outputs to the same container, then that many tokens get removed or added.</p>
<p>The total state of the Petri net is described by a <b>labelling</b> function which maps each container to the number of tokens it holds.  A transition is <b>enabled</b> to fire in a labelling if there are enough tokens at its input containers.  If no transitions are enabled, the it is <b>halted</b>.</p>
<p>The sequencing is non-deterministic, because in a given labelling there may be several transitions that are enabled.  Dataflow arises whenever one transition sends tokens to a container that is read by another transition.</p>
<p>Petri nets represent <i>entity conversion networks</i>, which consist of entities of different species, along with reactions that convert input entities to output entities.  Each entity is symbolized by a token in the net, and all the tokens for a species are grouped into an associated container.  The conversion of entities is represented by the transitions that transform tokens.</p>
<h3> Example 1: Disease processes </h3>
<p>Here&#8217;s an example discussed earlier <a href="https://johncarlosbaez.wordpress.com/2012/06/27/the-mathematics-of-biodiversity-part-3/">on Azimuth</a>.  It describes the virus that causes AIDS.  The species are <b>healthy</b> cell, <b>infected</b> cell, and <b>virion</b> (the technical term for an individual virus).  The transitions are for infection, production of healthy cells, reproduction of virions within an infected cell, death of healthy cells, death of infected cells, and death of virions.  </p>
<div align="center">
<img width="450" src="https://i0.wp.com/math.ucr.edu/home/baez/networks/pictures/HIV_petri_net.png" /></div>
<p>Here the species are yellow circles and the transitions are aqua squares.  Note that there are three transitions called &#8220;death&#8221; and two called &#8220;production.&#8221;  They are disambiguated by a Greek letter suffix.</p>
<p>&bull; <b>production</b> (<img src="https://s0.wp.com/latex.php?latex=%5Calpha&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;alpha" class="latex" />) describes the birth of one healthy cell, so it has no input and one <b>healthy</b> as output.  </p>
<p>&bull; <b>death</b> (<img src="https://s0.wp.com/latex.php?latex=%5Cgamma&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;gamma" class="latex" />) has one <b>healthy</b> as input and no output.  </p>
<p>&bull; <b>death</b> (<img src="https://s0.wp.com/latex.php?latex=%5Cdelta&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;delta" class="latex" />) has one <b>infected</b> as input and no output.  </p>
<p>&bull; <b>death</b> (<img src="https://s0.wp.com/latex.php?latex=%5Czeta&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;zeta" class="latex" />) has one <b>virion</b> as input and no output.</p>
<p>&bull; <b>infection</b> (<img src="https://s0.wp.com/latex.php?latex=%5Cbeta&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;beta" class="latex" />) takes one <b>healthy</b> and one <b>virion</b> as input, and has one <b>infected</b> cell as output.  </p>
<p>&bull; <b>production</b> (<img src="https://s0.wp.com/latex.php?latex=%5Cepsilon&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;epsilon" class="latex" />) describes the reproduction of the virus in an infected cell, so it has one <b>infected</b> as input, and one <b>infected</b> and one <b>virion</b> as output.</p>
<h3> Example 2: Population dynamics </h3>
<p>Here the tokens represent organisms, and the species are biological species.  This simple example involving two species, <b>wolf</b> and <b>rabbit</b>: </p>
<div align="center">
<img width="450" src="https://i0.wp.com/math.ucr.edu/home/baez/networks/pictures/wolf-rabbit.png" /></div>
<p>There are three transitions: <b>birth</b>, which inputs one <b>rabbit</b> and outputs <b>rabbit</b> + <b>rabbit</b> like asexual reproduction), <b>predation</b>, which converts <b>rabbit</b> plus <b>wolf</b> to <b>wolf</b> plus <b>wolf</b>, and <b>death</b>, which inputs one <b>wolf</b> and outputs nothing.</p>
<h3> Example 3: Chemical reaction networks </h3>
<p>Here the entities are chemical units:  molecules, isolated atoms, or ions.  Each chemical unit is represented by a token in the net, and a container holds all of the tokens for a chemical species.  Chemical reactions are then modeled as transitions that consume input tokens and generate output tokens.  </p>
<p>We will be using the following simplified model for <i>water formation and dissociation</i>:</p>
<p>&bull; The species are H, O, and H<sub>2</sub>O. </p>
<p>&bull; Transition <b>combine</b> inputs two H atoms and one O atom, and outputs an H<sub>2</sub>O molecule.</p>
<p>&bull; Transition <b>split</b> is the reverse process, which inputs one H<sub>2</sub> and outputs two H and one O.</p>
<div align="center">
<img width="390" src="https://i2.wp.com/math.ucr.edu/home/baez/networks/pictures/H2O-example.png" /></div>
<p>Note that the model is intended to show the <i>idea</i> of chemical reaction Petri nets, so it is not physically realistic.  The actual reactions involve H<sub>2</sub> and O<sub>2</sub>, and there are intermediate transitions as well.   For more details, see <a href="http://math.ucr.edu/home/baez/networks/networks_3.html">Part 3</a> of the network theory series.</p>
<h3> A Petri net simulator </h3>
<p>The following Python script will simulate a Petri net, using parameters that describe the species, the transitions, and the initial labelling.  It will run the net for a specified number of steps.   At each step it chooses randomly among the enabled transitions, fires it, and prints the new labelling on the console.</p>
<h4> Download </h4>
<p>Here is the first <a href="http://www.cs.nyu.edu/tanzer/azimuth/petri1.py">Petri net simulator</a>.</p>
<h4> Running the script </h4>
<p>The model parameters are already coded into the script.  So let&#8217;s give it a whirl: </p>
<p>python petri1.py</p>
<p>This produced the output:</p>
<pre class="brush: plain; title: ; notranslate" title="">
    H, O, H2O, Transition
    5, 3, 4, split
    7, 4, 3, split
    9, 5, 2, combine
    7, 4, 3, combine
    5, 3, 4, split
    7, 4, 3, split
    9, 5, 2, split
    11, 6, 1, combine
    9, 5, 2, split
    11, 6, 1, split
    13, 7, 0, ...
</pre>
<p>We started out in a state with 5 H&#8217;s, 3 O&#8217;s, and 4 H<sub>2</sub>O&#8217;s, then a split took place, which increased H by 2, increased O by 1, and decreased H<sub>2</sub>O by one, then&#8230;</p>
<p>Running it again gives a different execution sequence.  </p>
<h4> Software structures used in the program </h4>
<p>Before performing a full dissection of the code, I&#8217;d like to make a digression to discuss some of the basic software constructs that are used in this program.  This is directed in particular to those of you who are coming from the science side, and are interested in learning more about programming.  </p>
<p>This program exercises a few of the basic mechanisms of object-oriented and functional programming.  The Petri net logic is bundled into the definition of a single <i>class</i> called PetriNet, and each  PetriNet <i>object</i> is an <i>instance</i> of the class.  This logic is grouped into <i>methods</i>, which are functions whose first parameter is bound to an instance of the class.</p>
<p>For example, here is the method IsHalted of the class PetriNet:</p>
<pre class="brush: python; title: ; notranslate" title="">
    def IsHalted(this):
        return len(this.EnabledTransitions()) == 0
</pre>
<p>The first parameter, conventionally called &#8220;this&#8221; or &#8220;self,&#8221; refers to the PetriNet class instance.  len returns the length of a list, and EnabledTransitions is a method that returns the list of transitions enabled in the current labelling.  </p>
<p>Here is the syntax for using the method:</p>
<pre class="brush: python; title: ; notranslate" title="">
    if petriNetInstance.IsHalted(): ...
</pre>
<p>If it were the case that IsHalted took additional parameters, the definition would look like this:</p>
<pre class="brush: python; title: ; notranslate" title="">
    def IsHalted(this, arg1, ..., argn):
</pre>
<p>and the call would look like this:</p>
<pre class="brush: python; title: ; notranslate" title="">
    if petriNetInstance.IsHalted(arg1, ..., argn)
</pre>
<p>Here is the definition of EnabledTransitions, which shows a basic element of functional programming:  </p>
<pre class="brush: python; title: ; notranslate" title="">
    def EnabledTransitions(this):
        return filter(lambda transition: transition.IsEnabled(this.labelling), this.transitions)
</pre>
<p>A PetriNet instance holds this list of Transition objects, called this.transitions.  The expression &#8220;lambda: transition &#8230;&#8221; is an <b>anonymous function</b> that maps a Transition object to the boolean result returned by calling the IsEnabled method on that transition, given the current labelling this.labelling.  The filter function takes an anonymous boolean-valued function and a list of objects, and returns the sublist consisting of those objects that satisfy this predicate.    </p>
<p>The program also gives an example of <i>class inheritance</i>, because the class PetriNet inherits all fields and methods from a base class called PetriNetBase.</p>
<h4> Python as a language for pedagogical and scientific programming </h4>
<p>We continue with our digression, to talk now about the choice of language.  With something as fundamental to our thinking as a language, it&#8217;s easy to see how the topic of language choice tends to become partisan.  Imagine, for example, a debate between different nationalities, about which language was more beautiful, logical, etc.  Here the issue is put into perspective by David Tweed from the Azimuth project:</p>
<blockquote><p> Programming languages are a lot like &#8220;motor vehicles&#8221;: a family car has different trade-offs to a sports car to a small van to a big truck to a motorbike to &#8230;. Each of these has their own niche where they make the most sense to use.
</p></blockquote>
<p>The Petri net simulator which I wrote in Python, and which will soon to be dissected, could have been equivalently written in any modern object-oriented programming language, such as C++, Java or C#.  I chose Python for the following reasons.  First, it is a scripting language.  This means that the casual user need not get involved with a  compilation step that is preparatory to running the program.  Second, it does provide the abstraction capabilities needed to express the Petri net model.  Third, I like the way that the syntax rolls out.  This syntax has been described as executable pseudo-code.  Finally, the language has a medium-sized user-base and support community.  </p>
<p>Python is good for proof of concept programs, and it works well as a pedagogical programming language.  Yet it is also practical.  It has been widely adopted in the field of scientific programming.  David Tweed explains it in these terms:</p>
<blockquote><p>
I think a big part of Python&#8217;s use comes from an the way that a lot of scientific programming is as much about &#8220;management&#8221; &#8212; parsing files of prexisting structured data, iterating over data, controlling network connections, calling C code, launching subprograms, etc &#8212; as much as &#8220;numeric computation&#8221;. This is where Python is particularly good, and it&#8217;s now acquired the NumPy &amp; SciPy extensions to speed up the numerical programming elements, but it&#8217;s primarily the higher level elements that make it attractive in science.
</p></blockquote>
<p>Because variables in Python are neither declared in the program text, nor inferred by the byte-code compiler, the types of the variables are known only at run time.  This has a negative impact on performance for data intensive calculations: rather than having the compiler generate the right code for the data type that is being processed, the types need to be checked at run time.  The NumPy and SciPy libraries address this by providing bulk array operations, e.g., addition of two matrices, in a native code library that is integrated with the Python runtime environment.  If this framework does not suffice for your high-performance numerical application, then you will have to turn to other languages, notably, C++.</p>
<p>All this being said, it is now time to return to the main topic of this article, which is the <i>content</i> of Petri net programming.</p>
<h4> Top-level structure of the Petri net simulator script </h4>
<p>At a high level, the script constructs a Petri net, constructs the initial labelling, and then runs the simulation for a given number of steps.</p>
<p>First construct the Petri net:</p>
<pre class="brush: python; title: ; notranslate" title="">  
    # combine: 2H + 1O -&gt; 1H2O
    combineSpec = (&quot;combine&quot;, [[&quot;H&quot;,2],[&quot;O&quot;,1]], [[&quot;H2O&quot;,1]])

    # split: 1H2O -&gt; 2H + 1O 
    splitSpec = (&quot;split&quot;, [[&quot;H2O&quot;,1]], [[&quot;H&quot;,2],[&quot;O&quot;,1]])

    petriNet = PetriNet(
        [&quot;H&quot;,&quot;O&quot;,&quot;H2O&quot;],         # species
        [combineSpec,splitSpec]  # transitions
    )
</pre>
<p>Then establish the initial labelling:</p>
<pre class="brush: python; title: ; notranslate" title="">
    initialLabelling = {&quot;H&quot;:5, &quot;O&quot;:3, &quot;H2O&quot;:4}
</pre>
<p>Then run it for twenty steps:</p>
<pre class="brush: python; title: ; notranslate" title="">
    steps = 20
    petriNet.RunSimulation(steps, initialLabelling)
</pre>
<h4> Program code </h4>
<p>Species will be represented simply by their names, i.e., as strings.  PetriNet and Transition will be defined as object classes.  Each PetriNet instance holds a list of species names, a list of transition names, a list of Transition objects, and the current labelling.  The labelling is a dictionary from species name to token count.   Each Transition object contains an input dictionary and an input dictionary.  The input dictionary map the name of a species to the number of times that the transition takes it as input, and similarly for the output dictionary.</p>
<h5> Class PetriNet </h5>
<p>The PetriNet class has a top-level method called RunSimulation, which  makes repeated calls to FireOneRule.  FireOneRule obtains the list of enabled transitions, chooses one randomly, and fires it.  This is accomplished by the method SelectRandom, which uses a random integer between 1 and N to choose a transition from the list of enabled transitions.</p>
<pre class="brush: python; title: ; notranslate" title="">
    class PetriNet(PetriNetBase):
        def RunSimulation(this, iterations, initialLabelling): 
            this.PrintHeader()  # prints e.g. &quot;H, O, H2O&quot;
            this.labelling = initialLabelling
            this.PrintLabelling() # prints e.g. &quot;3, 5, 2&quot; 

            for i in range(iterations):
               if this.IsHalted():
                   print &quot;halted&quot;
                   return 
               else:
                   this.FireOneRule()
                   this.PrintLabelling(); 
            print &quot;iterations completed&quot; 
    
        def EnabledTransitions(this):
            return filter(lambda transition: transition.IsEnabled(this.labelling), this.transitions)
    
        def IsHalted(this):
            return len(this.EnabledTransitions()) == 0
    
        def FireOneRule(this):
            this.SelectRandom(this.EnabledTransitions()).Fire (this.labelling)

        def SelectRandom(this, items):
            randomIndex = randrange(len(items))
            return items[randomIndex]
</pre>
<h5> Class Transition </h5>
<p>The Transition class exposes two key methods.  IsEnabled takes a labeling as parameter, and returns a boolean saying whether the transition can fire.  This is determined by comparing the input map for the transition with the token counts in the labeling, to see if there is sufficient tokens for it to fire.  The Fire method takes a labelling in, and updates the counts in it to reflect the action of removing input tokens and creating output tokens.  </p>
<pre class="brush: python; title: ; notranslate" title="">
    class Transition:
        # Fields:
        # transitionName
        # inputMap: speciesName -&amp;gt; inputCount
        # outputMap: speciesName -&amp;gt; outputCount 
    
        # constructor
        def __init__(this, transitionName):
           this.transitionName = transitionName
           this.inputMap = {} 
           this.outputMap = {} 
    
        def IsEnabled(this, labelling):
           for inputSpecies in this.inputMap.keys():
              if labelling[inputSpecies] &amp;lt; this.inputMap[inputSpecies]: 
                  return False  # not enough tokens
           return True # good to go 
    
        def Fire(this, labelling):
           print this.transitionName
           for inputName in this.inputMap.keys():
              labelling[inputName] = labelling[inputName] - this.inputMap[inputName] 
           for outputName in this.outputMap.keys():
              labelling[outputName] = labelling[outputName] + this.outputMap[outputName] 
</pre>
<h5> Class PetriNetBase </h5>
<p>Notice that the class line for PetriNet declares that it inherits from a base class PetriNetBase.  The base class contains utility methods that support PetriNet:  PrintHeader, PrintLabelling, SelectRandom, and the constructor, which converts the transition specifications into Transition objects.</p>
<pre class="brush: python; title: ; notranslate" title="">
    class PetriNetBase:
        # Fields:
        # speciesNames
        # Transition list
        # labelling: speciesName -&amp;gt; token count 
    
        # constructor
        def __init__(this, speciesNames, transitionSpecs):
            this.speciesNames = speciesNames
            this.transitions = this.BuildTransitions(transitionSpecs)
    
        def BuildTransitions(this, transitionSpecs):
            transitions = []
            for (transitionName, inputSpecs, outputSpecs) in transitionSpecs:
                transition = Transition(transitionName)
                for degreeSpec in inputSpecs:
                    this.SetDegree(transition.inputMap, degreeSpec)
                for degreeSpec in outputSpecs:
                    this.SetDegree(transition.outputMap, degreeSpec)
                transitions.append(transition)
            return transitions 
    
        def SetDegree(this, dictionary, degreeSpec):
            speciesName = degreeSpec[0]
            if len(degreeSpec) == 2:
                degree = degreeSpec[1]
            else: 
                degree = 1
            dictionary[speciesName] = degree
    
        def PrintHeader(this):
            print string.join(this.speciesNames, &quot;, &quot;) + &quot;, Transition&quot;
               
        def PrintLabelling(this):
            for speciesName in this.speciesNames:
                print str(this.labelling[speciesName]) + &quot;,&quot;, 
</pre>
<h3> Summary </h3>
<p>We&#8217;ve learned about an important model for computation, called Petri nets, and seen how it can be used to model a general class of entity conversion networks, which include chemical reaction networks as a major case.  Then we wrote a program to simulate them, and applied it to a simple model for formation and dissociation of water molecules.</p>
<p>This is a good beginning, but observe the following limitation of our current program:  it just randomly picks a rule.  When we run the program, the simulation makes a kind of random walk, back and forth, between the states of full synthesis and full dissociation.  But in a real chemical system, the rates at which the transitions fires are _probabilistically determined_, and depend, among other things, on the temperature.  With a high probability for formation, and a low probability for dissociation, we would expect the system to reach an equilibrium state in which H<sub>2</sub>O is the predominant &#8220;token&#8221; in the system.  The relative concentration of the various chemical species would be determined by the relative firing rates of the various transitions.</p>
<p>This gives motivation for the next article that I am writing, on <i>stochastic</i> Petri nets.  </p>
<h3> Programming exercises </h3>
<p>1.  Extend the constructor for PetriNet to accept a dictionary from transitionName to a number, which will give the relative probability of that transition firing.  Modify the firing rule logic to use these values.  This is a step in the direction of the stochastic Petri nets covered in the next article.</p>
<p>2.  Make a prediction about the overall evolution of the system, given fixed probabilities for synthesis and dissociation, and then run the program to see if your prediction is confirmed.</p>
<p>3.  If you like, improve the usability of the script, by passing the model parameters from the command line.  Use sys.argv and eval.  You can use single quotes, and pass a string like &#8220;{&#8216;H&#8217;:5, &#8216;O&#8217;:3, &#8216;H2O&#8217;:4}&#8221; from the command line.</p>
<p>By the way: if you do this exercises, please post a comment including your code, or a link to your code!  To make Python code look pretty on this blog, see <a href="http://pythonconquerstheuniverse.wordpress.com/2011/11/06/posting-sourcecode-on-wordpress/">this</a>.</p>
<h3> Acknowledgements </h3>
<p>Thanks to David Tweed and Ken Webb for reviewing the code and coming up with improvements to the specification syntax for the Petri nets.   Thanks to Jacob Biamonte for the diagrams, and for energetically reviewing the article.  John Baez contributed the three splendid examples of Petri nets.  He also encouraged me along the way, and provided good support as an editor.</p>
<h3> Appendix: Notes on the language interpreter </h3>
<p>The sample program is written in Python, which is a low-fuss scripting language with abstraction capabilities.  The language is well-suited for proof-of-concept programming, and it has a medium-sized user base and support community.  The main website is <a href="http://www.python.org">www.python.org</a>.</p>
<p>You have a few distributions to choose from:</p>
<p>&bull; If you are on a Linux or Mac type of system, it is likely to already be installed.  Just open a shell and type &#8220;python.&#8221;  Otherwise, use the package manager to install it.</p>
<p>&bull; In Windows, you can use the version from the python.org web site.  Alternatively, install <a href="http://www.cygwin.com">cygwin</a>, and in the installer, select Python, along with any of your other favorite Linux-style packages.  Then you can partially pretend that you are working on a Linux type of system.</p>
<p>&bull; The <a href="http://www.enthought.com">Enthought</a> Python distribution comes packaged with a suite of Python-based open-source scientific and numeric computing packages.  This includes ipython, scipy, numpy and matplotlib.</p>
<p>The program is distributed as a self-contained script, so in Linux and cygwin you can just execute ./petri1.py.  When running this way under cygwin, you can either refer to the cygwin version of the Python executable, or to any of the native Windows versions of interpreter. You just need to adjust the first line of the script to point to the python executable.  </p>
									</div>

				<p class="postmetadata">
				<img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/speech_bubble.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2012/10/01/petri-net-programming/#comments">24 Comments</a>				| <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/documents.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/category/networks/" rel="category tag">networks</a>, <a href="https://johncarlosbaez.wordpress.com/category/software/" rel="category tag">software</a>								 | <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/permalink.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2012/10/01/petri-net-programming/" rel="bookmark" title="Permanent Link to Petri Net Programming (Part&nbsp;1)">Permalink</a>
<br /><img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/figure_ver1.gif" alt="" /> Posted by John Baez				</p>
			</div>
			<hr />
		
			<div class="post-11415 post type-post status-publish format-standard hentry category-economics category-risks category-software" id="post-11415">
				<h2><a href="https://johncarlosbaez.wordpress.com/2012/08/08/high-speed-finance/" rel="bookmark">High-Speed Finance</a></h2>
				<small>8 August, 2012</small><br />


				<div class="entry">
					<p> &nbsp; </p>
<div align="center">
<a href="http://imgur.com/DxWer"><img src="https://i2.wp.com/i.imgur.com/DxWer.gif" alt="" title="Hosted by imgur.com" /></a></div>
<p>These days, a lot of buying and selling of stocks is done by computers&#8212;it&#8217;s called <a href="http://en.wikipedia.org/wiki/Algorithmic_trading">algorithmic trading</a>.  Computers can do it much faster than people.  Watch how they&#8217;ve been going wild!</p>
<p>The date is at lower left.  In 2000 it took several seconds for computers to make a trade.  By 2010 the time had dropped to milliseconds&#8230; or even microseconds.   And around this year, market activity started becoming much more intense.   </p>
<p>I can&#8217;t even see the <a href="http://en.wikipedia.org/wiki/2010_Flash_Crash">Flash Crash</a> on May 6 of 2010&#8212;also known as The Crash of 2:45.  The Dow Jones plummeted 9% in 5 minutes, then quickly bounced back.   For fifteen minutes, the economy lost a trillion dollars.  Then it reappeared.</p>
<p>But on August 5, 2011, when the credit rating of the US got downgraded, you&#8217;ll see the activity <i>explode!</i>  And it&#8217;s been crazy ever since.</p>
<p>The movie above was created by <a href="http://www.nanex.net/aqck/2804.HTML">Nanex</a>, a company that provides market data to traders.  The x axis shows the time of day, from 9:30 to 16:00.  The y axis&#8230; well, it&#8217;s the amount of some activity per unit time, but they don&#8217;t say what.   Do you know?  </p>
<p>The folks at Nanex have something very interesting to say about this.  It&#8217;s not <a href="http://en.wikipedia.org/wiki/High-frequency_trading">high frequency trading</a> or &#8216;HFT&#8217; that they&#8217;re worried about&#8212;that&#8217;s actually gone <i>down</i> slightly from 2008 to 2012.  What&#8217;s gone up is &#8216;high frequency quoting&#8217;, also known as &#8216;quote spam&#8217; or &#8216;quote stuffing&#8217;.</p>
<p>Over on Google+, Sergey Ten explained the idea to me:</p>
<blockquote><p>
Quote spam is a well-known tactic.  It used by high-frequency traders to get competitive advantage over other high-frequency traders. HF traders generate high-frequency quote spam using a pseudorandom (or otherwise structured) algorithm, with his computers coded to ignore it. His competitors don&#8217;t know the generating algorithm and have to process each quote, thus increasing their load, consuming bandwidth and getting a slight delay in processing.
</p></blockquote>
<p>A quote is an offer to buy or sell stock at a given price.  For a clear and entertaining of how this works and why traders are locked into a race for speed, try:</p>
<p>&bull; Chris Stucchio, A high frequency trader&#8217;s apology, <a href="http://www.chrisstucchio.com/blog/2012/hft_apology.html">Part 1</a>, 16 April 2012.  <a href="http://www.chrisstucchio.com/blog/2012/hft_apology2.html">Part 2</a>, 25 April 2012.</p>
<p>I don&#8217;t know a great introduction to quote spam, but this paper isn&#8217;t bad:</p>
<p>&bull; Jared F. Egginton, Bonnie F. Van Ness, and Robert A. Van Ness, <a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1958281">Quote stuffing</a>, 15 March 2012.</p>
<h3> Toward the physical limits of speed </h3>
<p>In fact, the battle for speed is so intense that trading has run up against the speed of light.</p>
<p>For example, by 2013 there will be a new transatlantic cable at the bottom of the ocean, the first in a decade.  Why?  Just to <a href="http://www.popularmechanics.com/technology/engineering/infrastructure/a-transatlantic-cable-to-shave-5-milliseconds-off-stock-trades">cut the communication time between US and UK traders by 5 milliseconds</a>.  The new fiber optic line will be <i>straighter</i> than existing ones:</p>
<blockquote><p> &#8220;As a rule of thumb, each 62 miles that the light has to travel takes about 1 millisecond,&#8221; Thorvardarson says. &#8220;So by straightening the route between Halifax and London, we have actually shortened the cable by 310 miles, or 5 milliseconds.&#8221;
</p></blockquote>
<p>Meanwhile, a London-based company called Fixnetix has developed a special computer chip that can <a href="http://blogs.wsj.com/marketbeat/2011/06/14/wall-streets-need-for-trading-speed-the-nanosecond-age/">prepare a trade in just 740 nanoseconds</a>.  But why stop at nanoseconds?</p>
<blockquote><p>
With the race for the lowest “latency” continuing, some market participants are even talking about picoseconds&#8211;–trillionths of a second. At first the realm of physics and math and then computer science, the picosecond looms as the next time barrier.</p>
<p>Actions that take place in nanoseconds and picoseconds in some cases run up against the sheer limitations of physics, said Mark Palmer, chief executive of Lexington, Mass.-based StreamBase Systems.
</p></blockquote>
<h3> Black swans and the ultrafast machine ecology </h3>
<p>As high-frequency trading and high-frequency quoting leave slow-paced human reaction times in the dust, markets start to behave differently.  Here&#8217;s a great paper about that:</p>
<p>&bull; Neil Johnson, Guannan Zhao, Eric Hunsader, Jing Meng, Amith Ravindar, Spencer Carran amd Brian Tivnan, <a href="http://arxiv.org/abs/1202.1448">Financial black swans driven by ultrafast machine ecology</a>.   </p>
<p>A <a href="http://en.wikipedia.org/wiki/Black_swan_theory">black swan</a> is an unexpectedly dramatic event, like a market crash or a stock bubble that bursts.  But according to this paper, such events are now happening all the time at speeds beyond our perception!</p>
<p>Here&#8217;s one:</p>
<div align="center"><a><img src="https://i1.wp.com/math.ucr.edu/home/baez/stock_price_spike.jpg" /></a></div>
<p>It&#8217;s a price spike in the stock of a company called Super Micro Computer, Inc..  On October 1st, 2010, it shot up 26% and then crashed back down.  But this all happened in <i>25 milliseconds!</i> </p>
<p>These ultrafast black swans happen at least once a day.  And they happen most of all to financial institutions.  </p>
<p>Here&#8217;s a great blog article about this stuff:</p>
<p>&bull; Mark Buchanan, <a href="http://physicsoffinance.blogspot.com.au/2012/02/approaching-singularity-in-global.html">Approaching the singularity&#8212;in global finance</a>, <i>The Physics of Finance</i>, 13 February 2012.</p>
<p>I won&#8217;t try to outdo Buchanan&#8217;s analysis.  I&#8217;ll just quote the abstract of the original paper:</p>
<blockquote><p>
Society&#8217;s drive toward ever faster socio-technical systems, means that there is an urgent need to understand the threat from &#8216;black swan&#8217; extreme events that might emerge. On 6 May 2010, it took just five minutes for a spontaneous mix of human and machine interactions in the global trading cyberspace to generate an unprecedented system-wide Flash Crash. However, little is known about what lies ahead in the crucial sub-second regime where humans become unable to respond or intervene sufficiently quickly. Here we analyze a set of 18,520 ultrafast black swan events that we have uncovered in stock-price movements between 2006 and 2011. We provide empirical evidence for, and an accompanying theory of, an abrupt system-wide transition from a mixed human-machine phase to a new all-machine phase characterized by frequent black swan events with ultrafast durations (&lt;650ms for crashes, &lt;950ms for spikes). Our theory quantifies the systemic fluctuations in these two distinct phases in terms of the diversity of the system&#039;s internal ecology and the amount of global information being processed. Our finding that the ten most susceptible entities are major international banks, hints at a hidden relationship between these ultrafast &#039;fractures&#039; and the slow &#039;breaking&#039; of the global financial system post-2006. More generally, our work provides tools to help predict and mitigate the systemic risk developing in any complex socio-technical system that attempts to operate at, or beyond, the limits of human response times.
</p></blockquote>
<h3> Trans-quantitative analysts? </h3>
<p>When you get into an arms race of trying to write algorithms whose behavior other algorithms can&#8217;t predict, the math involved gets very tricky.   Over on Google+, F. Lengvel pointed out something strange.  In May 2010, <a href="http://christianmarks.wordpress.com/2010/05/25/mathematical-logic-finds-unexpected-application-on-wall-street/">Christian Marks</a> claimed that financiers were hiring experts on <a href="http://en.wikipedia.org/wiki/Large_countable_ordinal">large ordinals</a>&#8212;crudely speaking, big infinite numbers!&#8212;to design algorithms that were hard to outwit.  </p>
<p>I can&#8217;t confirm his account, but I can&#8217;t resist quoting it:</p>
<blockquote><p>
In an unexpected development for the depressed market for mathematical logicians, Wall Street has begun quietly and aggressively recruiting proof theorists and recursion theorists for their expertise in applying <a href="http://www.cs.man.ac.uk/~hsimmons/ORDINAL-NOTATIONS/ordinal-notations.html">ordinal notations</a> and <a href="http://en.wikipedia.org/wiki/Ordinal_collapsing_function">ordinal collapsing</a> functions to <a href="http://www.hftreview.com/">high-frequency algorithmic trading</a>. Ordinal notations, which specify sequences of ordinal numbers of ever increasing complexity, are being used by elite trading operations to parameterize families of trading strategies of breathtaking sophistication. </p>
<p>The monetary advantage of the current strategy is rapidly exhausted after a lifetime of approximately four seconds — an eternity for a machine, but barely enough time for a human to begin to comprehend what happened. The algorithm then switches to another trading strategy of higher ordinal rank, and uses this for a few seconds on one or more electronic exchanges, and so on, while opponent algorithms attempt the same maneuvers, risking billions of dollars in the process.</p>
<p>The elusive and highly coveted positions for proof theorists on Wall Street, where they are known as trans-quantitative analysts, have not been advertised, to the chagrin of executive recruiters who work on commission. Elite hedge funds and bank holding companies have been discreetly approaching mathematical logicians who have programming experience and who are familiar with arcane software such as the <a href="http://www.mtnmath.com/ord/index.html">ordinal calculator</a>. A few logicians were offered seven figure salaries, according to a source who was not authorized to speak on the matter.
</p></blockquote>
<p>Is this for real?  I like the idea of &#8216;trans-quantitative analysts&#8217;: it reminds me of <a href="http://en.wikipedia.org/wiki/Transfinite_number">&#8216;transfinite numbers&#8217;</a>, which is another name for infinities.   But it sounds a bit like a joke, and I haven&#8217;t been able to track down any references to trans-quantitative analysts, except people talking about  Christian Marks&#8217; blog article.  </p>
<p>I understand a bit about ordinal notations, but I don&#8217;t think this is the time to go into that&#8212;not before I&#8217;m sure this stuff is for real.  Instead, I&#8217;d rather reflect on a comment of Boris Borcic <a href="https://plus.google.com/u/0/106808239073321070854/posts/Mw2VN1wi5Ls">over on Google+</a>:</p>
<blockquote><p>
Last week it occurred to me that LessWrong and OvercomingBias together might play a role to explain why Singularists don&#8217;t seem to worry about High Frequency Robot Trading as a possible pathway for Singularity-like developments. I mean IMO they should, the Singularity is about machines taking control, ownership is control, HFT involves slicing ownership in time-slices too narrow for humans to know themselves owners and possibly control.﻿
</p></blockquote>
<p>The ensuing discussion got diverted to the question of whether algorithmic trading involved &#8216;intelligence&#8217;, but maybe intelligence is not the point.  Perhaps algorithmic traders have become successful parasites on the financial system without themselves being intelligent, simply by virtue of their speed.  And the financial system, in turn, seems to be a successful parasite on our economy.    <a href="http://en.wikipedia.org/wiki/Regulatory_capture">Regulatory capture</a>&#8212;the control of the regulating agencies by the industry they&#8217;re supposed to be regulating&#8212;seems almost complete.  Where will this lead?  </p>
									</div>

				<p class="postmetadata">
				<img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/speech_bubble.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2012/08/08/high-speed-finance/#comments">38 Comments</a>				| <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/documents.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/category/economics/" rel="category tag">economics</a>, <a href="https://johncarlosbaez.wordpress.com/category/risks/" rel="category tag">risks</a>, <a href="https://johncarlosbaez.wordpress.com/category/software/" rel="category tag">software</a>								 | <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/permalink.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2012/08/08/high-speed-finance/" rel="bookmark" title="Permanent Link to High-Speed Finance">Permalink</a>
<br /><img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/figure_ver1.gif" alt="" /> Posted by John Baez				</p>
			</div>
			<hr />
		
			<div class="post-11212 post type-post status-publish format-standard hentry category-climate category-probability category-software" id="post-11212">
				<h2><a href="https://johncarlosbaez.wordpress.com/2012/07/30/increasing-the-signal-to-noise-ratio-with-more-noise/" rel="bookmark">Increasing the Signal-to-Noise Ratio With More&nbsp;Noise</a></h2>
				<small>30 July, 2012</small><br />


				<div class="entry">
					<p><i>guest post by <b><a href="http://www.azimuthproject.org/azimuth/show/Glyn+Adgie">Glyn Adgie</a></b> and <b><a href="http://www.azimuthproject.org/azimuth/show/Tim+van+Beek">Tim van Beek</a></b></i></p>
<h3>Or: Are the Milankovich Cycles Causing the Ice Ages?</h3>
<p>The <a href="http://www.azimuthproject.org/azimuth/show/Milankovitch+cycle#Idea">Milankovich cycles</a> are periodic changes in how the Earth orbits the Sun.  One question is: can these changes can be responsible for the ice ages?  On the first sight it seems impossible, because the changes are simply too small. But it turns out that we can find a dynamical system where a small periodic external force is actually strengthened by random &#8216;noise&#8217; in the system. This phenomenon has been dubbed &#8216;stochastic resonance&#8217; and has been proposed as an explanation for the ice ages.</p>
<p>In this blog post we would like to provide an introduction to it. We will look at a bistable toy example. And you&#8217;ll even get to play with an online simulation that some members of the Azimuth Project created, namely Glyn Adgie, Allan Erskine and Jim Stuttard!</p>
<h3> Equations with noise </h3>
<p>In <i>This Weeks Finds</i>, back in <a href="https://johncarlosbaez.wordpress.com/2010/12/24/this-weeks-finds-week-308/">&#8216;week308&#8217;</a>, we had a look at a model with &#8216;noise&#8217;.  A lot of systems can be described by ordinary differential equations:</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B+%5Cfrac%7Bd+x%7D%7Bd+t%7D+%3D+f%28x%2C+t%29%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{ &#92;frac{d x}{d t} = f(x, t)} " class="latex" /> </p>
<p>If <img src="https://s0.wp.com/latex.php?latex=f&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="f" class="latex" /> is nice, the time evolution of the system will be a nice smooth function <img src="https://s0.wp.com/latex.php?latex=x%28t%29%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x(t)," class="latex" /> like the trajectory of a thrown stone. But there are situations where we have some kind of noise, a chaotic, fluctuating influence, that we would like to take into account. This could be, for example, turbulence in the air flow around a rocket. Or, in our case, short term fluctuations of the weather of the earth. If we take this into account, we get an equation of the form</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B+%5Cfrac%7Bd+x%7D%7Bd+t%7D+%3D+f%28x%2C+t%29+%2B+W%28t%29+%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{ &#92;frac{d x}{d t} = f(x, t) + W(t) } " class="latex" /></p>
<p>where the <img src="https://s0.wp.com/latex.php?latex=W&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="W" class="latex" /> is some model of noise. In all the examples above, the noise is actually a simplified way to take into account fast degrees of freedom of the system at hand. This way we do not have to explicitly model these degrees of freedom, which is often impossible. But we could still try to formulate a model where long term influences of these degrees of freedom are included.</p>
<p>A way to make the above mathematically precise is to write the equation in the form</p>
<p><img src="https://s0.wp.com/latex.php?latex=d+x_t+%3D+f%28x%2C+t%29+d+t+%2B+g%28x%2C+t%29+d+W_t+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="d x_t = f(x, t) d t + g(x, t) d W_t " class="latex" /></p>
<p>as an <a href="http://en.wikipedia.org/wiki/It%C5%8D_calculus"><b>Ito stochastic differential equation</b></a> driven by a <a href="http://en.wikipedia.org/wiki/Wiener_process"><b>Wiener process</b></a>.</p>
<p>The mathematics behind this is somewhat sophisticated, but we don&#8217;t need to delve into it in this blog post. For those who are interested in it, we have gathered some material here:</p>
<p>&bull; <a href="http://www.azimuthproject.org/azimuth/show/Stochastic+differential+equation">Stochastic differential equation</a>, Azimuth Library.</p>
<p>Physicists and engineers who model systems with ordinary and partial differential equations should think of stochastic differential equations as another tool in the toolbox. With this tool, it is possible to easily model systems that exhibit new behavior.</p>
<h3> What is stochastic resonance? </h3>
<p>Listening to your friend who sits across the table, the noise around you may become a serious distraction, although humans are famous for their ability to filter the signal&#8212;what your friend is saying &#8211; from the noise&#8212;all other sounds, people&#8217;s chatter, dishes clattering etc. But could you imagine a situation where <i>more noise</i> makes it <i>easier</i> to detect the signal?</p>
<p>Picture a  marble that sits in a double well potential:</p>
<div align="center">
<img src="https://i1.wp.com/math.ucr.edu/home/baez/mathematical/marble_in_double_well_potential.jpg" alt="double well potential" />
</div>
<p>This graphic is taken from</p>
<p>&bull; Roberto Benzi, <a href="http://arxiv.org/abs/nlin/0702008">Stochastic resonance: from climate to biology</a>.</p>
<p>This review paper is also a nice introduction to the topic.</p>
<p>This simple model can be applied to various situations. Since we think about the ice ages, we can interpret the two metastable states at the two minima of the potential in this way: the minimum to the left at -1 corresponds to the Earth in an ice age.   The minimum to the right at 1 corresponds to the Earth at warmer temperatures, as we know it today.</p>
<p>Let us add a small periodic force to the model.  This periodic force corresponds to different solar input due to periodic changes in Earth&#8217;s orbit: the Milankovich cycles.  There are actually several different cycles with different periods, but in our toy model we will consider only one force with one period.</p>
<p>If the force itself is too small to get the marble over the well that is between the two potential minima, we will not observe any periodic change in the position of the marble.  But if we add noise to the motion, it may happen that the force together with the noise succeed in getting the marble from one minimum to the other!  This is more likely to happen when the force is pushing the right way. So, it should happen with roughly the same periodicity as the force: we should see a &#8216;quasi-periodic&#8217; motion of the marble.  </p>
<p>But if we increase the noise more and more, the influence of the external force will become unrecognizable, and we will not recognize any pattern at all.</p>
<p>There should be a noise strength somewhere in between that makes the Milankovich cycles as visible as possible from the Earth&#8217;s temperature record.  In other words, if we think of the periodic force as a &#8216;signal&#8217;, there should be some amount of noise that maximizes the &#8216;signal-to-noise ratio&#8217;.  Can we find out what it is? </p>
<p>In order to find out, let us make our model precise.  Let&#8217;s take the time-independent potential to be</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B+V%28x%29+%3D+%5Cfrac%7B1%7D%7B4%7D+x%5E4+-+%5Cfrac%7B1%7D%7B2%7D+x%5E2+%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{ V(x) = &#92;frac{1}{4} x^4 - &#92;frac{1}{2} x^2 } " class="latex" /></p>
<p>This potential has two local minima at <img src="https://s0.wp.com/latex.php?latex=x+%3D+%5Cpm+1.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x = &#92;pm 1." class="latex" />   Let&#8217;s take the time-dependent periodic forcing, or &#8216;signal&#8217;, to be</p>
<p><img src="https://s0.wp.com/latex.php?latex=F%28t%29+%3D+-+A+%5C%3B+%5Csin%28t%29+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="F(t) = - A &#92;; &#92;sin(t) " class="latex" /></p>
<p>The constant <img src="https://s0.wp.com/latex.php?latex=A&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="A" class="latex" /> is the amplitude of the periodic forcing.  The time-dependent effective potential of the system is therefore:</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B+V%28x%2C+t%29+%3D+%5Cfrac%7B1%7D%7B4%7D+x%5E4+-+%5Cfrac%7B1%7D%7B2%7D+x%5E2+-+A+%5C%3B+%5Csin%28t%29+x+%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{ V(x, t) = &#92;frac{1}{4} x^4 - &#92;frac{1}{2} x^2 - A &#92;; &#92;sin(t) x } " class="latex" /></p>
<p>Including noise leads to the equation of motion, which is usually called a <b>Langevin equation</b> by physicists and chemists:</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cbegin%7Barray%7D%7Bccl%7D+dX+%26%3D%26+-V%27%28X_t%2C+t%29+%5C%3B+dt+%2B+%5Csqrt%7B2D%7D+%5C%3B+dW_t+%5C%5C++%5C%5C++%26%3D%26+%28X_t+-+X_t%5E3+%2B+A+%5C%3B++%5Csin%28t%29%29+%5C%3B+dt++%2B+%5Csqrt%7B2D%7D+%5C%3B+dW_t++%5Cend%7Barray%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;begin{array}{ccl} dX &amp;=&amp; -V&#039;(X_t, t) &#92;; dt + &#92;sqrt{2D} &#92;; dW_t &#92;&#92;  &#92;&#92;  &amp;=&amp; (X_t - X_t^3 + A &#92;;  &#92;sin(t)) &#92;; dt  + &#92;sqrt{2D} &#92;; dW_t  &#92;end{array} " class="latex" /></p>
<p>For more about what a Langevin equation is, see our article on <a href="http://www.azimuthproject.org/azimuth/show/Stochastic+differential+equation">stochastic differential equations</a>.</p>
<p>This model has two free parameters, <img src="https://s0.wp.com/latex.php?latex=A&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="A" class="latex" /> and <img src="https://s0.wp.com/latex.php?latex=D.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="D." class="latex" />   As already mentioned, <img src="https://s0.wp.com/latex.php?latex=A&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="A" class="latex" /> is the amplitude of the forcing.  <img src="https://s0.wp.com/latex.php?latex=D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="D" class="latex" /> is called the <b>diffusion coefficient</b> and represents the strength of noise. In our case it is a constant, but in more general models it could depend on space and time.</p>
<p>It is possible to write programs that generate simulations aka numerical approximations to solutions of stochastic differential equations. For those interested in how this works, there is an addendum at the bottom of the blog post that explains this.  We can use such a program to model the three cases of small, high and optimal noise level.  </p>
<p>In the following graphs, green is the external force, while red is the marble position.  Here is a simulation with a low level of noise:</p>
<div align="center">
<img width="450" src="https://i2.wp.com/www.azimuthproject.org/azimuth/files/stochres_weaknoise.jpg" alt="low noise level" />
</div>
<p>As you can see, within the time of the simulation there is no transition from the metastable state at 1 to the one at -1. That is, in this situation Earth stays in the warm state.</p>
<p>Here is a simulation with a high noise level:</p>
<div align="center">
<img width="450" src="https://i1.wp.com/math.ucr.edu/home/baez/Stochastic_Resonance_High_Noise_Level.JPG" alt="high noise level" />
</div>
<p>The marble jumps wildly between the states. By inspecting the graph with your eyes only, you don&#8217;t see any pattern in it, do you?</p>
<p>And finally, here is a simulation where the noise level seems to be about right to make the signal visible via a quasi-periodic motion:</p>
<div align="center">
<img width="450" src="https://i0.wp.com/www.azimuthproject.org/azimuth/files/stochres_intermednoise.jpg" alt="high noise level" />
</div>
<p>Sometimes the marble makes a transition in phase with the force, sometimes it does not, sometimes it has a phase lag. It can even happen that the marble makes a transition while the force acts in the opposite direction!</p>
<p>Some members of the Azimuth crew have created an online model that calculates simulations of the model, for different values of the involved constants.  You can see it here:</p>
<p>&bull; <a href="http://www.adgie.f9.co.uk/azimuth/stochastic-resonance/Javascript/StochasticResonanceEuler.html">Stochastic resonance example</a>, Azimuth Code Project.</p>
<p>We especially thank Allan Erskine and Jim Stuttard.</p>
<p>You can change the values using the sliders under the graphic and see what happens. You can also choose different &#8216;random seeds&#8217;, which means that the random numbers used in the simulation will be different.</p>
<p>Above, we asked if one could calculate for a fixed <img src="https://s0.wp.com/latex.php?latex=A&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="A" class="latex" /> the level of noise <img src="https://s0.wp.com/latex.php?latex=D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="D" class="latex" /> that maximizes the signal to noise ratio.  We have defined the model system, but we still need to define &#8216;signal to noise ratio&#8217; in order to address the question.</p>
<p>There is no general definition that makes sense for all kinds of systems. For our model system, let&#8217;s assume that the expectation value of <img src="https://s0.wp.com/latex.php?latex=x%28t%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x(t)" class="latex" /> has a Fourier expansion like this:</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B+%5Clangle+x%28t%29+%5Crangle+%3D+%5Csum_%7Bn+%3D+-+%5Cinfty%7D%5E%7B%5Cinfty%7D++M_n+%5Cexp%7B%28i+n+t%29%7D+%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{ &#92;langle x(t) &#92;rangle = &#92;sum_{n = - &#92;infty}^{&#92;infty}  M_n &#92;exp{(i n t)} } " class="latex" /></p>
<p>Then one useful definition of the <b>signal to noise ratio</b> <img src="https://s0.wp.com/latex.php?latex=%5Ceta&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;eta" class="latex" /> is </p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B+%5Ceta+%3A%3D+%5Cfrac%7B%7CM_1%7C%5E2%7D%7BA%5E2%7D%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{ &#92;eta := &#92;frac{|M_1|^2}{A^2}} " class="latex" /></p>
<p>So, can one calculate the value of <img src="https://s0.wp.com/latex.php?latex=D%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="D," class="latex" /> depending on <img src="https://s0.wp.com/latex.php?latex=A&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="A" class="latex" /> that maximizes <img src="https://s0.wp.com/latex.php?latex=%5Ceta&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;eta" class="latex" />? We don&#8217;t know! Do you?</p>
<p>If you would like to know more, have a look at this page:</p>
<p>&bull; <a href="http://www.azimuthproject.org/azimuth/show/Stochastic+resonance">Stochastic resonance</a>, Azimuth Library.</p>
<p>Also, read on for more about how we numerically solved our stochastic differential equation, and the design decisions we had to make to create a <a href="http://www.adgie.f9.co.uk/azimuth/stochastic-resonance/Javascript/StochasticResonanceEuler.html">simulation that runs on your web browser</a>.</p>
<h3> For &uuml;bernerds only </h3>
<h4> Numerically solving stochastic differential equations</h4>
<p>Maybe you are asking yourself what is behind the <a href="http://www.adgie.f9.co.uk/azimuth/stochastic-resonance/Javascript/StochasticResonanceEuler.html">online model</a>? How does one &#8216;numerically solve&#8217; a stochastic differential equation and in what sense are the graphs that you see there &#8216;close&#8217; to the exact solution?  No problem, we will explain it here!</p>
<p>First, you need C code like this:</p>
<pre class="brush: cpp; title: ; notranslate" title="">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;math.h&gt;

#define znew ((z=36969*(z&amp;65535)+(z&gt;&gt;16)) &lt;&lt; 16)
#define wnew ((w = 18000*(w&amp;65535)+(w&gt;&gt;16))&amp;65535)

static unsigned long z = 362436069, w = 521288629;

float rnor() {
	float x, y, v;

	x = ((signed long) (znew + wnew)) * 1.167239E-9;

	if (fabs(x) &lt; 1.17741)
		return (x);

	y = (znew + wnew) * 2.328306E-10;

	if (log(y) &lt; 0.6931472 - 0.5 * x * x)
		return x;

	x = (x &gt; 0) ? 0.8857913 * (2.506628 - x) : -0.8857913 * (2.506628 + x);

	if (log(1.8857913 - y) &lt; 0.5718733 - 0.5 * (x * x))
		return (x);

	do {
		v = ((signed long) (znew + wnew)) * 4.656613E-10;

		x = -log(fabs(v)) * 0.3989423;

		y = -log((znew + wnew)* 2.328306E-10);

	} while (y + y &lt; x * x);

	return (v &gt; 0 ? 2.506628 + x : 2.506628 - x);
}

int main(void) {

	int index = 0;

	for(index = 0; index &lt; 10; index++) {
		printf(&quot;%f\n&quot;, rnor());
	}
	return EXIT_SUCCESS;
}

</pre>
<p>Pretty scary, huh? Do you see what it does? We don&#8217;t think anyone stands a chance to understand all the &#8216;magical constants&#8217; in it. We pasted it here so you can go around and show it to friends who claim that they know the programming language C and understand every program in seconds, and see what they can tell you about it. We&#8217;ll explain it below.</p>
<p>Since this section is for &uuml;bernerds, we will assume that you know stochastic processes in continuous time. Brownian motion on <img src="https://s0.wp.com/latex.php?latex=%5Cmathbb%7BR%7D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;mathbb{R}" class="latex" /> can be viewed as a probability distribution on the space of all continuous functions on a fixed interval, <img src="https://s0.wp.com/latex.php?latex=C%5B0%2C+T%5D.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="C[0, T]." class="latex" /> This is also true for solutions of stochastic differential equations in general. A &#8216;numerical approximation&#8217; to a stochastic differential equation is an discrete time approximation that samples this probability space. </p>
<p>Another way to think about it is to start with numerical approximations of ordinary differential equations. When you are handed such an equation of the form</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B+%5Cfrac%7Bd+x%7D%7Bd+t%7D+%3D+f%28x%2C+t%29+%7D&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{ &#92;frac{d x}{d t} = f(x, t) }" class="latex" /></p>
<p>with an initial condition <img src="https://s0.wp.com/latex.php?latex=x%280%29+%3D+x_0%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x(0) = x_0," class="latex" /> you know that there are different discrete approximation schemes to calculate an approximate solution to it. The simplest one is the Euler scheme. You need to choose a step size <img src="https://s0.wp.com/latex.php?latex=h&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="h" class="latex" /> and calculate values for <img src="https://s0.wp.com/latex.php?latex=x&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x" class="latex" /> recursively using the formula</p>
<p><img src="https://s0.wp.com/latex.php?latex=x_%7Bn+%2B+1%7D+%3D+x_n+%2B+f%28x_n%2C+t_n%29+%5C%3B+h+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x_{n + 1} = x_n + f(x_n, t_n) &#92;; h " class="latex" /> </p>
<p>with <img src="https://s0.wp.com/latex.php?latex=t_%7Bn%2B1%7D+%3D+t_n+%2B+h.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="t_{n+1} = t_n + h." class="latex" />  Connect the discrete values of <img src="https://s0.wp.com/latex.php?latex=x_n&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x_n" class="latex" /> with straight lines to get your approximating function <img src="https://s0.wp.com/latex.php?latex=x%5Eh.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x^h." class="latex" />  For <img src="https://s0.wp.com/latex.php?latex=h+%5Cto+0%2C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="h &#92;to 0," class="latex" /> you get convergence for example in the supremum norm of <img src="https://s0.wp.com/latex.php?latex=x%5Eh%28t%29&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x^h(t)" class="latex" /> to the exact solution <img src="https://s0.wp.com/latex.php?latex=x%28t%29%3A&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="x(t):" class="latex" /></p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Cdisplaystyle%7B++%5Clim_%7Bh+%5Cto+0%7D+%5C%7C+x%5Eh+-+x+%5C%7C_%5Cinfty+%3D+0+%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;displaystyle{  &#92;lim_{h &#92;to 0} &#92;| x^h - x &#92;|_&#92;infty = 0 } " class="latex" /></p>
<p>It is possible to extend some schemes from ordinary differential equations to stochastic differential equations that involve certain random variables in every step. The best textbook on the subject that I know is this one: </p>
<p>&bull; Peter E. Kloeden and Eckhard Platen, <i>Numerical Solution of Stochastic Differential Equations</i>, Springer, Berlin, 2010.  (<a href="http://www.zentralblatt-math.org/zmath/en/advanced/?q=an:0752.60043">ZMATH review</a>.)</p>
<p>The extension of the Euler scheme is very simple, deceptively so!  It is much less straightforward to determine the extensions of higher Runge&#8211;Kutta schemes, for example. You have been warned! The Euler scheme for stochastic differential equations of the form</p>
<p><img src="https://s0.wp.com/latex.php?latex=d+X_t+%3D+f%28X%2C+t%29+d+t+%2B+g%28X%2C+t%29+d+W_t+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="d X_t = f(X, t) d t + g(X, t) d W_t " class="latex" /></p>
<p>is simply</p>
<p><img src="https://s0.wp.com/latex.php?latex=X_%7Bn+%2B+1%7D+%3D+X_n+%2B+f%28X_n%2C+t_n%29+%5C%3B+h+%2B+g%28X_n%2C+t_n%29+%5C%3B+w_n+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X_{n + 1} = X_n + f(X_n, t_n) &#92;; h + g(X_n, t_n) &#92;; w_n " class="latex" /></p>
<p>where all the <img src="https://s0.wp.com/latex.php?latex=w_n&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="w_n" class="latex" /> are independent random variables with a normal distribution <img src="https://s0.wp.com/latex.php?latex=N%280%2C+h%29.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="N(0, h)." class="latex" />  If you write a computer program that calculates approximations using this scheme, you need a <a href="http://en.wikipedia.org/wiki/Pseudorandom_number_generator">pseudorandom number generator</a>. This is what the code we posted above is about. Actually, it is an efficient algorithm to calculate pseudorandom numbers with a normal distribution. It&#8217;s from this paper:</p>
<p>&bull; George Marsaglia and Wai Wan Tsang, The Monty Python method for generating random variables, <i><a href="http://dl.acm.org/citation.cfm?id=292453">ACM Transactions on Mathematical Software</a></i> <b>24</b> (1998), 341&#8211;350.</p>
<p>While an approximation to an ordinary differential equation approximates a function, an approximation to a stochastic differential equation approximates a probability distribution on <img src="https://s0.wp.com/latex.php?latex=C%5B0%2C+T%5D.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="C[0, T]." class="latex" />  So we need a different concept of &#8216;convergence&#8217; of the approximation for <img src="https://s0.wp.com/latex.php?latex=h+%5Cto+0.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="h &#92;to 0." class="latex" /> The two most important ones are called &#8216;strong&#8217; and &#8216;weak&#8217; convergence.  </p>
<p>A discrete approximation <img src="https://s0.wp.com/latex.php?latex=X%5Eh&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X^h" class="latex" /> to an Ito process <img src="https://s0.wp.com/latex.php?latex=X&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X" class="latex" /> <b>converges strongly</b> at time <img src="https://s0.wp.com/latex.php?latex=T&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="T" class="latex" /> if</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Clim_%7Bh+%5Cto+0%7D+%5C%3B+E%28%7CX_T%5Eh+-+X_T%7C%29+%3D+0+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;lim_{h &#92;to 0} &#92;; E(|X_T^h - X_T|) = 0 " class="latex" /></p>
<p>It is said to be of <b>strong order</b> <img src="https://s0.wp.com/latex.php?latex=%5Cgamma&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;gamma" class="latex" /> if there is a constant <img src="https://s0.wp.com/latex.php?latex=C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="C" class="latex" /> such that</p>
<p><img src="https://s0.wp.com/latex.php?latex=E%28%7CX_T%5Eh+-+X_T%7C%29+%5Cleq+C+h%5E%7B%5Cgamma%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="E(|X_T^h - X_T|) &#92;leq C h^{&#92;gamma} " class="latex" /></p>
<p>As we see from the definition, a strong approximation needs to approximate the path of the original process <img src="https://s0.wp.com/latex.php?latex=X&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X" class="latex" /> at the end of the time interval <img src="https://s0.wp.com/latex.php?latex=%5B0%2C+T%5D.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="[0, T]." class="latex" /> </p>
<p>What about weak convergence?</p>
<p>A discrete approximation <img src="https://s0.wp.com/latex.php?latex=X%5Eh&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X^h" class="latex" /> to an Ito process <img src="https://s0.wp.com/latex.php?latex=X&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X" class="latex" /> <b>converges weakly</b> for a given class of functions <img src="https://s0.wp.com/latex.php?latex=G&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="G" class="latex" /> at a time <img src="https://s0.wp.com/latex.php?latex=T&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="T" class="latex" /> if for every function <img src="https://s0.wp.com/latex.php?latex=g+%5Cin+G&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="g &#92;in G" class="latex" /> we have</p>
<p><img src="https://s0.wp.com/latex.php?latex=%5Clim_%7Bh+%5Cto+0%7D+%5C%3B+E%28g%28X_T%5Eh%29%29+-+E%28g%28X_T%29%29+%3D+0+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;lim_{h &#92;to 0} &#92;; E(g(X_T^h)) - E(g(X_T)) = 0 " class="latex" /></p>
<p>where we assume that all appearing expectation values exist and are finite.</p>
<p>It is said to be of <b>weak order</b> <img src="https://s0.wp.com/latex.php?latex=%5Cgamma&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="&#92;gamma" class="latex" />  with respect to <img src="https://s0.wp.com/latex.php?latex=G&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="G" class="latex" /> if there is a constant <img src="https://s0.wp.com/latex.php?latex=C&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="C" class="latex" /> such that for every function <img src="https://s0.wp.com/latex.php?latex=g+%5Cin+G&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="g &#92;in G" class="latex" />:</p>
<p><img src="https://s0.wp.com/latex.php?latex=E%28g%28X_T%5Eh%29%29+-+E%28g%28X_T%29%29+%5Cleq+C+h%5E%7B%5Cgamma%7D+&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="E(g(X_T^h)) - E(g(X_T)) &#92;leq C h^{&#92;gamma} " class="latex" /></p>
<p>One speaks simply of &#8216;weak convergence&#8217; when <img src="https://s0.wp.com/latex.php?latex=G&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="G" class="latex" /> is the set of all polynomials.</p>
<p>So weak convergence means that the approximation needs to approximate the probability distribution of the original process <img src="https://s0.wp.com/latex.php?latex=X.&#038;bg=ffffff&#038;fg=333333&#038;s=0&#038;c=20201002" alt="X." class="latex" />  Weak and strong convergence are indeed different concepts.  For example, the Euler scheme is of strong order 0.5 and of weak order 1.0.</p>
<p>Our simple online model implements the Euler scheme to calculate approximations to our model equation. So now you know it what sense it is indeed an approximation to the solution process!</p>
<h4> Implementation details of the interactive online model </h4>
<p>There appear to be three main approaches to implementing an interactive online model. It is assumed that all the main browsers understand Javascript.</p>
<p>1) Implement the model using a server-side programme that produces graph data in response to parameter settings, and use Javascript in the browser to plot the graphs and provide interaction inputs.</p>
<p>2) Pre-compute the graph data for various sets of parameter values, send these graphs to the browser, and use Javascript to select a graph and plot it. The computation of the graph data can be done on the designers machine, using their preferred language.</p>
<p>3) Implement the model entirely in Javascript.</p>
<p>Option 1) is only practical if one can run interactive programs on the server. While there is technology to do this, it is not something that most ISPs or hosting companies provide. You might be provided with Perl and PHP, but neither of these is a language of choice for numeric coding.</p>
<p>Option 2) has been tried. The problem with this approach is the large amount of pre-computed data required. For example, if we have 4 independent parameters, each of which takes on 10 values, then we need 10000 graphs. Also, it is not practical to provide much finer control of each parameter, as this increases the data size even more.</p>
<p>Option 3) looked doable. Javascript has some nice language features, such as closures, which are a good fit for implementing numerical methods for solving ODEs. The main question then is whether a typical Javascript engine can cope with the compute load.</p>
<p>One problem that arose with a pure Javascript implementation is the production of normal random deviates required for the numerical solution of an SDE. Javascript has a random() function, that produces uniform random deviates, and there are algorithms that could be implemented in Javascript to produce normal deviates from uniform deviates. The problems here are that there is no guarantee that all Javascript engines use the same PRNG, or that the PRNG is actually any good, and we cannot set a specific seed in Javascript. Even if the PRNG is adequate, we have the problem that different users will see different outputs for the same parameter settings. Also, reloading the page will reseed the PRNG from some unknown source, so a user will not be able to replicate a particular output.</p>
<p>The chosen solution was to pre-compute a sequence of random normal deviates, using a PRNG of known characteristics. This sequence is loaded from the server, and will naturally be the same for all users and sessions. This is the C++ code used to create the fixed Javascript array:</p>
<pre class="brush: cpp; title: ; notranslate" title="">
#include &lt;boost/random/mersenne_twister.hpp&gt;
#include &lt;boost/random/normal_distribution.hpp&gt;
#include &lt;iostream&gt;

int main(int argc, char * argv[])
{
    boost::mt19937 engine(1234); // PRNG with seed = 1234
    boost::normal_distribution&lt;double&gt; rng(0.0, 1.0); // Mean 0.0, standard deviation 1.0
    std::cout &lt;&lt; &quot;normals = [\n&quot;;
    int nSamples = 10001;
    while(nSamples--)
    {
        std::cout &lt;&lt; rng(engine) &lt;&lt; &quot;,\n&quot;;
    }
    std::cout &lt;&lt; &quot;];&quot;;
}
</pre>
<p>Deviates with a standard deviation other than 1.0 can be produced in Javascript by multiplying the pre-computed deviates by a suitable scaling factor.</p>
<p>The graphs only use 1000 samples from the Javascript array. To see the effects of different sample paths, the Javascript code selects one of ten slices from the pre-computed array. </p>
									</div>

				<p class="postmetadata">
				<img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/speech_bubble.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2012/07/30/increasing-the-signal-to-noise-ratio-with-more-noise/#comments">48 Comments</a>				| <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/documents.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/category/climate/" rel="category tag">climate</a>, <a href="https://johncarlosbaez.wordpress.com/category/probability/" rel="category tag">probability</a>, <a href="https://johncarlosbaez.wordpress.com/category/software/" rel="category tag">software</a>								 | <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/permalink.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2012/07/30/increasing-the-signal-to-noise-ratio-with-more-noise/" rel="bookmark" title="Permanent Link to Increasing the Signal-to-Noise Ratio With More&nbsp;Noise">Permalink</a>
<br /><img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/figure_ver1.gif" alt="" /> Posted by John Baez				</p>
			</div>
			<hr />
		
			<div class="post-5603 post type-post status-publish format-standard hentry category-software" id="post-5603">
				<h2><a href="https://johncarlosbaez.wordpress.com/2011/10/15/the-science-code-manifesto/" rel="bookmark">The Science Code&nbsp;Manifesto</a></h2>
				<small>15 October, 2011</small><br />


				<div class="entry">
					<p>There&#8217;s a <a href="http://sciencecodemanifesto.org/">manifesto</a> that you can <a href="http://sciencecodemanifesto.org/endorse">sign</a>, calling for a more sensible approach to the use of software in science.  It says:</p>
<blockquote><p>
Software is a cornerstone of science. Without software, twenty-first century science would be impossible. Without better software, science cannot progress.</p>
<p>But the culture and institutions of science have not yet adjusted to this reality. We need to reform them to address this challenge, by adopting these five principles:</p>
<p><b>Code:</b> All source code written specifically to process data for a published paper must be available to the reviewers and readers of the paper.</p>
<p><b>Copyright:</b> The copyright ownership and license of any released source code must be clearly stated.</p>
<p><b>Citation:</b> Researchers who use or adapt science source code in their research must credit the code’s creators in resulting publications.</p>
<p><b>Credit:</b> Software contributions must be included in systems of scientific assessment, credit, and recognition.</p>
<p><b>Curation:</b> Source code must remain available, linked to related materials, for the useful lifetime of the publication.
</p></blockquote>
<p>The founding signatories are:</p>
<p>&bull; Nick Barnes and David Jones of the <a href="http://climatecode.org/">Climate Code Foundation</a>,</p>
<p>&bull; Peter Norvig, the <a href="http://research.google.com/pubs/author205.html">director of research at Google</a>,</p>
<p>&bull; Cameron Neylon of <a href="http://cameronneylon.net/">Science in the Open</a>,</p>
<p>&bull; Rufus Pollock of the <a href="http://okfn.org/">Open Knowledge Foundation</a>,</p>
<p>&bull; Joseph Jackson of the <a href="http://opensciencesummit.com/">Open Science Foundation</a>.</p>
<p>I was the 312th person to sign.  How about joining?</p>
<p>There&#8217;s a longer discussion of each point of the manifesto <a href="http://sciencecodemanifesto.org/discussion">here</a>.  It ties in nicely with the philosophy of the <a href="http://www.azimuthproject.org/azimuth/show/Azimuth+Code+Project">Azimuth Code Project</a>, namely:</p>
<blockquote><p>
Many papers in climate science present results that cannot be reproduced. The authors present a pretty diagram, but don’t explain which software they used to make it, and don’t make this software available, don’t really explain how they did what they did. This needs to change! Scientific results need to be reproducible. Therefore, any software used should be versioned and published alongside any scientific results.</p>
<p>All of this is true for large climate models such as General Circulation Models, as well—but the problem becomes much more serious, because these models have long outgrown the extend where a single developer was able to understand all the code. This is a kind of phase transition in software development: it necessitates a different toolset and a different approach to software development.
</p></blockquote>
<p>As Nick Barnes points out, these ideas</p>
<blockquote><p>
&#8230; are simply extensions of the core principle of science: publication. Publication is what distinguishes science from alchemy, and is what has propelled science&#8212;and human society&#8212;so far and so fast in the last 300 years. The Manifesto is the natural application of this principle to the relatively new, and increasingly important, area of science software.
</p></blockquote>
									</div>

				<p class="postmetadata">
				<img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/speech_bubble.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2011/10/15/the-science-code-manifesto/#comments">15 Comments</a>				| <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/documents.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/category/software/" rel="category tag">software</a>								 | <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/permalink.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2011/10/15/the-science-code-manifesto/" rel="bookmark" title="Permanent Link to The Science Code&nbsp;Manifesto">Permalink</a>
<br /><img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/figure_ver1.gif" alt="" /> Posted by John Baez				</p>
			</div>
			<hr />
		
			<div class="post-4014 post type-post status-publish format-standard hentry category-climate category-software" id="post-4014">
				<h2><a href="https://johncarlosbaez.wordpress.com/2011/06/12/your-model-is-verified-but-not-valid-huh/" rel="bookmark">Your Model Is Verified, But Not Valid!&nbsp;Huh?</a></h2>
				<small>12 June, 2011</small><br />


				<div class="entry">
					<p><i>guest post by <b><a href="http://www.azimuthproject.org/azimuth/show/Tim+van+Beek">Tim van Beek</a></b></i></p>
<p>Among the prominent tools in climate science are complicated computer models.  For more on those, try this blog:</p>
<p>&bull; Steve Easterbrook, <a href="http://www.easterbrook.ca/steve/">Serendipity, or What has Software Engineering got to do with Climate Change?</a></p>
<p>After reading <a href="http://www.easterbrook.ca/steve/?p=2032">Easterbrook&#8217;s blog post about &#8220;climate model validation&#8221;</a>, and some discussions of this topic elsewhere, I noticed that there is some &#8220;computer terminology&#8221; floating around that disguises itself as plain English! This has led to some confusion, so I&#8217;d like to explain some of it here.</p>
<h3>Technobabble: The Quest for Cooperation</h3>
<p>Climate change may be the first problem in the history of humankind that has to be tackled on a global scale, by people all over the world working together. Of course, a prerequisite of working together is a mutual understanding and a mutual language. Unfortunately every single one of the many professions that scientists and engineers engage in have created their own dialect.  And most experts are proud of it! </p>
<p>When I read about the confusion that &#8220;validation&#8221; versus &#8220;verification&#8221; of climate models has caused, I was reminded of the phrase &#8220;technobabble&#8221;, which screenwriters for the TV series <i>Star Trek</i> used whenever they had to write a dialog involving the engineers on the Starship Enterprise. Something like this:</p>
<blockquote><p> &#8220;Captain, we have to send an inverse tachyon beam through the main deflector dish!&#8221;</p></blockquote>
<blockquote><p>&#8220;Ok, make it so!&#8221;</p></blockquote>
<p>Fortunately, neither Captain Picard nor the audience had to understand what was really going on.   </p>
<p>It&#8217;s a bit different in the real world, where not everyone may have the luxury of staying on the sidelines while the trustworthy crew members in the Enterprise&#8217;s engine room solve all the problems. We can start today by explaining some software engineering technobabble that came up in the context of climate models.  But why would software engineers bother in the first place? </p>
<h3> Short Review of Climate Models</h3>
<p>Climate models come in a hierarchy of complexity.  The simplest ones only try to simulate the energy balance of the planet earth.  These are called <a href="http://www.azimuthproject.org/azimuth/show/Energy+balance+model">energy balance models</a>.  They don&#8217;t take into account the spherical shape of the earth, for example.  </p>
<p>At the opposite extreme, the most complex ones try to simulate the material and heat flow of the atmosphere and the oceans on a topographical model of the spinning earth.  These are called <a href="http://www.azimuthproject.org/azimuth/show/General+circulation+model">general circulation models</a>, or GCMs for short. GCMs have a lot of code, sometimes more than a million lines of code.</p>
<p>A line of code is basically one instruction for the computer to carry out, like:</p>
<blockquote><p> add 1/2 and 1/6 and store the result in a variable called e</p></blockquote>
<blockquote><p> print e on the console</p></blockquote>
<p>In order to understand what a computer program does, in theory, one has to memorize every single line of code and understand it. And most programs use a lot of other programs, so in theory one would have to understand those, too. This is of course not possible for a single person!</p>
<p>We hope that taking into account a lot of effects, which results in a lot of lines of code, makes the models more accurate.  But it certainly means that they are complex enough to be interesting for software engineers.</p>
<p>In the case of software that is used to run an internet shop, a million lines of code isn&#8217;t much.  But it is already too big for one single person to handle. Basically, this is where all the problems start, that software engineering seeks to solve.</p>
<blockquote><p> <i>When more than one person works on a software project things often get complicated.</i> </p>
<p>(From the manual of CVS, the &#8220;Concurrent Versions System&#8221;.)
</p></blockquote>
<h3> Software Design Circle</h3>
<p>The job of software engineer is in some terms similar to the work of an architect.  The differences are mainly due to the abstract nature of software.   Everybody can see if a building is finished or if it isn&#8217;t, but that&#8217;s not possible with software. Nevertheless every software project does come to an end, and people have to decide whether or not the product, the software, is finished and does what it should.  But since software is so abstract, people have come up with special ideas about how the software &#8220;production process&#8221; should work and how to tell if the software is correct.  I would like to explain these a little bit further.</p>
<h4> Stakeholders and Shifts in Stakeholder Analysis</h4>
<p>There are many different people working in an office building with different interests: cleaning squads, janitors, plant security, and so on. When you design a new office building, you need to identify and take into account all the different interests of all these groups.  Most software projects are similar, and the process just mentioned is usually called <b>stakeholder analysis</b>.</p>
<p>Of course, if you take into account <i>only</i> the groups already mentioned, you&#8217;ll build an office building without any offices, because that would obviously be the simplest one to monitor and to keep working.   Such an office building wouldn&#8217;t make much sense, of course!  This is because we made a fatal mistake with our stakeholder analysis: we failed to take into account the most important stakeholders, the people who will actually <i>use</i> the offices. These are the <b>key stakeholders</b> of the office building project. </p>
<p>After all, the primary purpose of an office building is to provide offices. And in the end, if we have an office building without offices, we&#8217;ll notice that no one will pay us for our efforts. </p>
<h4> Gathering Requirements</h4>
<p>While it may be obvious what most people want from an office building, the situation is usually much more abstract, hence much more complicated, for software projects. </p>
<p>This is why software people carry out a <b>requirement analysis</b>, where they ask the stakeholders what they would like the software to do. A requirement for an office building might be, for example, &#8220;we need a railway station nearby, because most of the people who will work in the building don&#8217;t have cars.&#8221; A requirement for a software project might be, for example, &#8220;we need the system to send email notifications to our clients on a specific schedule&#8221;. </p>
<p>In an ideal world, the requirement analysis would result in a document &mdash;usually called something like a <b>system specification</b>&mdash;that contains both the requirements, and also descriptions of the test cases that are needed to test whether the finished system meets the requirements.  For example:</p>
<blockquote><p>
&#8220;Employee A lives in an apartment 29 km away from the office building and does not have a car. She gets to work within 30 minutes by using public transportation.&#8221;
</p></blockquote>
<h4> Verification versus Validation</h4>
<p>When we have finished the office building (or the software system), we&#8217;ll have to do some <b>acceptance testing</b>, in order to convince our customer that she should pay us (or simply to use the system, if it is for free). When you buy a car, your &#8220;acceptance test&#8221; is driving away with it&mdash;if that does not work, you know that there is something wrong with your car! But for complicated software&mdash;or office buildings&mdash;we need to agree on what we do to test if the system is finished. That&#8217;s what we need the test cases for.</p>
<p>If we are lucky, the relevant test cases will already be described in the system specification, as noted above. But that is not the whole story. </p>
<p>Every scientific community that has its own identity invents its own new language, often borrowing words from everyday language and defining new, surprising, special meanings for them. Software engineers are no different. There are, for example, two very different aspects to testing  a system:</p>
<p>&bull; Did we do everything according to the system specification?</p>
<p>and:</p>
<p>&bull; Now that the system is there, and our key stakeholders can see it for themselves, did we get the system specification right: is our product useful to them?</p>
<p>The first is called  <b>verification</b>, the second <b>validation</b>. As you can see, software engineers took two almost synonymous words from everyday language and gave them quite different meanings!</p>
<p>For example, if you wrote in the specification for an online book seller:</p>
<blockquote><p> &#8220;we calculate the book price by multiplying the ISBN number by pi&#8221;
</p></blockquote>
<p>and the final software system does just that, then the system is <i>verified</i>.  But if the book seller would like to stay in business, I bet that he won&#8217;t say the system has been <i>validated</i>.</p>
<h3> Stakeholders of Climate Models</h3>
<p>So, for business applications, it&#8217;s not quite right to ask &#8220;is the software correct?&#8221;  The really important question is: &#8220;is the software as useful for the key stakeholders as it should be?&#8221;</p>
<h4> But in Mathematics Everything is Either True or False!</h4>
<p>One may wonder if this &#8220;true versus useful&#8221; stuff above makes any sense when we think about a piece of software that calculates, for example, a known mathematical function like a &#8220;modified Bessel function of the first kind&#8221;. After all, it is defined precisely in mathematics what these functions look like.  </p>
<p>If we are talking about creating a program that can evaluate these functions, there are a lot of <i>technical</i> choices that need to be specified.  Here is a random example (if you don&#8217;t understand it, don&#8217;t worry, that is not necessary to get the point):</p>
<p>&bull; Current computers know data types with a finite value range and finite precision only, so we need to agree on which such data type we want as a model of the real or complex numbers.  For example, we might want to use the &#8220;double precision floating-point format&#8221;, which is an international standard.</p>
<p>Another aspect is, for example, &#8220;how long may the function take to return a value?&#8221; This is an example of a non-functional requirement (see <a href="http://en.wikipedia.org/wiki/Non-functional_requirement">Wikipedia</a>). These requirements will play a role in the implementation too, of course.</p>
<p>However, apart from these technical choices, there is no ambiguity as to what the function should do, so there is no need to distinguish verification and validation. Thank god that mathematics is eternal! A Bessel function will always be the same, for all of eternity.  <img src="https://i1.wp.com/math.ucr.edu/home/baez/emoticons/tongue.gif" alt="" /></p>
<p>Unfortunately, this is no longer true when a computer program computes something that we would like to compare to the real world. Like, for example, a weather forecast. In this case the computer model will, like all models, include some aspects of the real world. Or rather, some specific implementations of a mathematical model of a part of the real world.</p>
<p>Verification will still be the same, if we understand it to be the stage where we test to see if the single pieces of the program compute what they are supposed to. The parts of the program that do things that can be defined in a mathematically precise way. But validation will be a whole different step if understood in the sense of &#8220;is the model useful?&#8221;</p>
<h4> But Everybody Knows What Weather Is!</h4>
<p>But still, does this apply to climate models at all? I mean, everybody knows what &#8220;climate&#8221; is, and &#8220;climate models&#8221; should simulate just that, right? </p>
<p>As it turns out, it is not so easy, because climate models serve very different purposes:</p>
<p>&bull; Climate scientists want to test their understanding of basic climate processes, just as physicists calculate a lot of solutions to their favorite theories to gain a better understanding of what these theories can and do model.</p>
<p>&bull; Climate models are also used to analyse observational data, to supplement such data and/or to correct them. Climate models have had success in detecting misconfiguration and biases in observational instruments. </p>
<p>&bull; Finally, climate models are also used for global and/or local predictions of climate change.</p>
<p>The question &#8220;is my climate model right?&#8221; therefore translates to the question &#8220;is my climate model useful?&#8221;  This question has to refer to a specific use of the model, or rather: to the viewpoint of the key stakeholders.</p>
<h4> The Shift of Stakeholders </h4>
<p>One problem of the discussions of the past seems to be due to a shift of the key stakeholders.  For example: some climate models have been developed as a tool for climate scientists to play around with certain aspects of the climate. When the scientists published papers, including insights gained from these models, they usually did not publish anything about the implementation details. Mostly, they did not publish anything about the model at all. </p>
<p>This is nothing unusual. After all, a physicist or mathematician will routinely publish her results and conclusions&mdash;maybe with proofs. But she is not required to publish every single thought she had to think to produce her results. </p>
<p>But after the results of climate science became a topic in international politics, a change of the key stakeholders occurred: a lot of people outside the climate science community developed an interest in the models. This is a good thing. There is a legitimate need of researchers to limit participation in the review process, of course. But when the results of a scientific community become the basis of far-reaching political decisions, there is a legitimate public interest in the details of the ongoing research process, too. The problem in this case is that the requirements of the new key stakeholders, such as interested software engineers outside the climate research community, are quite different from the requirements of the former key stakeholders, climate scientists.</p>
<p>For example, if you write a program for your own eyes only, there is hardly any need to write a detailed documentation of it. If you write it for others to understand it, as rule of thumb, you&#8217;ll have to produce at least as much documentation as code.</p>
<h4> Back to the Start: Farms, Fields and Forests</h4>
<p>As an example of a rather prominent critic of climate models, let&#8217;s quote the physicist <a href="http://www.canada.com/nationalpost/news/story.html?id=985641c9-8594-43c2-802d-947d65555e8e">Freeman Dyson</a>:</p>
<blockquote><p> The models solve the equations of fluid dynamics and do a very good job of describing the fluid motions of the atmosphere and the oceans.</p>
<p>They do a very poor job of describing the clouds, the dust, the chemistry and the biology of fields, farms and forests. They are full of fudge factors so the models more or less agree with the observed data. But there is no reason to believe the same fudge factors would give the right behaviour in a world with different chemistry, for example in a world with increased CO<sub>2</sub>.
</p></blockquote>
<p>Let&#8217;s assume that Dyson is talking here about GCMs, with all their parametrizations of unresolved processes (which he calls &#8220;fudge factors&#8221;). Then the first question that comes to my mind is &#8220;why would a climate model <i>need</i> to describe fields, farms and forests in more detail?&#8221; </p>
<p>I&#8217;m quite sure that the answer will depend on what aspects of the climate the model should represent, in what regions and over what timescale. </p>
<p>And that certainly depends on the answer to the question &#8220;what will we use our model for?&#8221; Dyson seems to assume that the answer to this question is obvious, but I don&#8217;t think that this is true. So, maybe we should start with  &#8220;stakeholder analysis&#8221; first.</p>
									</div>

				<p class="postmetadata">
				<img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/speech_bubble.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2011/06/12/your-model-is-verified-but-not-valid-huh/#comments">32 Comments</a>				| <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/documents.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/category/climate/" rel="category tag">climate</a>, <a href="https://johncarlosbaez.wordpress.com/category/software/" rel="category tag">software</a>								 | <img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/permalink.gif" alt="" /> <a href="https://johncarlosbaez.wordpress.com/2011/06/12/your-model-is-verified-but-not-valid-huh/" rel="bookmark" title="Permanent Link to Your Model Is Verified, But Not Valid!&nbsp;Huh?">Permalink</a>
<br /><img src="https://s2.wp.com/wp-content/themes/pub/contempt/images/blog/figure_ver1.gif" alt="" /> Posted by John Baez				</p>
			</div>
			<hr />
		
		<div class="navigation">
			<div class="alignleft"></div>
			<div class="alignright"><a href="https://johncarlosbaez.wordpress.com/category/software/" >Next Entries &raquo;</a></div>
		</div>

	
	</div>

	<div id="sidebar">
				<ul>

		 <li>

				<p>You are currently browsing the archives for the software category.</p>

					</li> 
		<li id="recent-posts-3" class="widget widget_recent_entries">
		<h2 class="widgettitle">latest posts:</h2>

		<ul>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/09/23/classical-mechanics-versus-thermodynamics-part-3/">Classical Mechanics versus Thermodynamics (Part&nbsp;3)</a>
									</li>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/09/22/maxwells-relations-part-3/">Maxwell&#8217;s Relations (Part&nbsp;3)</a>
									</li>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/09/18/maxwells-relations-part-two/">Maxwell&#8217;s Relations (Part&nbsp;2)</a>
									</li>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/09/17/maxwells-relations-part-1/">Maxwell&#8217;s Relations (Part&nbsp;1)</a>
									</li>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/09/13/the-cyclic-identity-for-partial-derivatives/">The Cyclic Identity for Partial&nbsp;Derivatives</a>
									</li>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/08/17/information-geometry-part-21/">Information Geometry (Part&nbsp;21)</a>
									</li>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/08/14/information-geometry-part-20/">Information Geometry (Part&nbsp;20)</a>
									</li>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/08/08/information-geometry-part-19/">Information Geometry (Part&nbsp;19)</a>
									</li>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/08/05/information-geometry-part-18/">Information Geometry (Part&nbsp;18)</a>
									</li>
											<li>
					<a href="https://johncarlosbaez.wordpress.com/2021/07/29/structured-vs-decorated-cospans-part-2/">Structured vs Decorated Cospans (Part&nbsp;2)</a>
									</li>
					</ul>

		</li>
<li id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widgettitle">latest comments:</h2>
				<table class="recentcommentsavatar" cellspacing="0" cellpadding="0" border="0">
					<tr><td title="amarashiki" class="recentcommentsavatartop" style="height:32px; width:32px;"><a href="http://gravatar.com/amarashiki" rel="nofollow"><img alt='' src='https://0.gravatar.com/avatar/62b2df0762257e75433ad6f161488c3a?s=32&#038;d=identicon&#038;r=G' class='avatar avatar-32' height='32' width='32' /></a></td><td class="recentcommentstexttop" style=""><a href="http://gravatar.com/amarashiki" rel="nofollow">amarashiki</a> on <a href="https://johncarlosbaez.wordpress.com/2012/01/23/classical-mechanics-versus-thermodynamics-part-2/#comment-172566">Classical Mechanics versus The&hellip;</a></td></tr><tr><td title="John Baez" class="recentcommentsavatarend" style="height:32px; width:32px;"><a href="http://math.ucr.edu/home/baez/" rel="nofollow"><img alt='' src='https://0.gravatar.com/avatar/34784534843022b3541c8ddd693718cb?s=32&#038;d=identicon&#038;r=G' class='avatar avatar-32' height='32' width='32' /></a></td><td class="recentcommentstextend" style=""><a href="http://math.ucr.edu/home/baez/" rel="nofollow">John Baez</a> on <a href="https://johncarlosbaez.wordpress.com/2021/09/23/classical-mechanics-versus-thermodynamics-part-3/#comment-172560">Classical Mechanics versus The&hellip;</a></td></tr><tr><td title="domenico" class="recentcommentsavatarend" style="height:32px; width:32px;"><img alt='' src='https://2.gravatar.com/avatar/ba06491deb8346d20356ac2ae05893ee?s=32&#038;d=identicon&#038;r=G' class='avatar avatar-32' height='32' width='32' /></td><td class="recentcommentstextend" style="">domenico on <a href="https://johncarlosbaez.wordpress.com/2021/09/23/classical-mechanics-versus-thermodynamics-part-3/#comment-172559">Classical Mechanics versus The&hellip;</a></td></tr><tr><td title="domenico" class="recentcommentsavatarend" style="height:32px; width:32px;"><img alt='' src='https://2.gravatar.com/avatar/ba06491deb8346d20356ac2ae05893ee?s=32&#038;d=identicon&#038;r=G' class='avatar avatar-32' height='32' width='32' /></td><td class="recentcommentstextend" style="">domenico on <a href="https://johncarlosbaez.wordpress.com/2021/09/23/classical-mechanics-versus-thermodynamics-part-3/#comment-172558">Classical Mechanics versus The&hellip;</a></td></tr><tr><td title="Maxwell Relations | Equivalent eXchange" class="recentcommentsavatarend" style="height:32px; width:32px;"><a href="http://equivalentexchange.blog/2021/09/25/maxwell-relations/" rel="nofollow"></a></td><td class="recentcommentstextend" style=""><a href="http://equivalentexchange.blog/2021/09/25/maxwell-relations/" rel="nofollow">Maxwell Relations |&hellip;</a> on <a href="https://johncarlosbaez.wordpress.com/2021/09/22/maxwells-relations-part-3/#comment-172557">Maxwell&#8217;s Relations (Par&hellip;</a></td></tr><tr><td title="Maxwell Relations | Equivalent eXchange" class="recentcommentsavatarend" style="height:32px; width:32px;"><a href="http://equivalentexchange.blog/2021/09/25/maxwell-relations/" rel="nofollow"></a></td><td class="recentcommentstextend" style=""><a href="http://equivalentexchange.blog/2021/09/25/maxwell-relations/" rel="nofollow">Maxwell Relations |&hellip;</a> on <a href="https://johncarlosbaez.wordpress.com/2021/09/18/maxwells-relations-part-two/#comment-172556">Maxwell&#8217;s Relations (Par&hellip;</a></td></tr><tr><td title="Maxwell Relations | Equivalent eXchange" class="recentcommentsavatarend" style="height:32px; width:32px;"><a href="http://equivalentexchange.blog/2021/09/25/maxwell-relations/" rel="nofollow"></a></td><td class="recentcommentstextend" style=""><a href="http://equivalentexchange.blog/2021/09/25/maxwell-relations/" rel="nofollow">Maxwell Relations |&hellip;</a> on <a href="https://johncarlosbaez.wordpress.com/2021/09/17/maxwells-relations-part-1/#comment-172555">Maxwell&#8217;s Relations (Par&hellip;</a></td></tr><tr><td title="Robert A. Wilson" class="recentcommentsavatarend" style="height:32px; width:32px;"><a href="https://robwilson1.wordpress.com" rel="nofollow"><img alt='' src='https://2.gravatar.com/avatar/24dc7e2371491f36fd4538b3474920b5?s=32&#038;d=identicon&#038;r=G' class='avatar avatar-32' height='32' width='32' /></a></td><td class="recentcommentstextend" style=""><a href="https://robwilson1.wordpress.com" rel="nofollow">Robert A. Wilson</a> on <a href="https://johncarlosbaez.wordpress.com/2021/04/04/the-koide-formula/#comment-172553">The Koide Formula</a></td></tr><tr><td title="John Baez" class="recentcommentsavatarend" style="height:32px; width:32px;"><a href="http://math.ucr.edu/home/baez/" rel="nofollow"><img alt='' src='https://0.gravatar.com/avatar/34784534843022b3541c8ddd693718cb?s=32&#038;d=identicon&#038;r=G' class='avatar avatar-32' height='32' width='32' /></a></td><td class="recentcommentstextend" style=""><a href="http://math.ucr.edu/home/baez/" rel="nofollow">John Baez</a> on <a href="https://johncarlosbaez.wordpress.com/2021/09/23/classical-mechanics-versus-thermodynamics-part-3/#comment-172545">Classical Mechanics versus The&hellip;</a></td></tr><tr><td title="Wolfgang" class="recentcommentsavatarend" style="height:32px; width:32px;"><img alt='' src='https://1.gravatar.com/avatar/d3c6d7ec8069e25c08a0a11263581925?s=32&#038;d=identicon&#038;r=G' class='avatar avatar-32' height='32' width='32' /></td><td class="recentcommentstextend" style="">Wolfgang on <a href="https://johncarlosbaez.wordpress.com/2021/09/23/classical-mechanics-versus-thermodynamics-part-3/#comment-172543">Classical Mechanics versus The&hellip;</a></td></tr>				</table>
				</li>
<li id="text-3" class="widget widget_text"><h2 class="widgettitle">How To Write Math Here:</h2>
			<div class="textwidget"><p>You can <a href="http://en.wikibooks.org/wiki/LaTeX/Mathematics">include math in your comments using LaTeX</a>,  but you need to do it this way:</p>
<p>&#036;latex  E = mc^2&#036;</p>
<p>You need the word 'latex' right after the first dollar sign, and it needs a space after it.  Double dollar signs don't work, and other limitations apply, some described <a href="http://en.support.wordpress.com/latex/">here</a>.  You can't preview comments here, but I'm happy to fix errors.</p>
</div>
		</li>
<li id="categories-2" class="widget widget_categories"><h2 class="widgettitle">Read Posts On:</h2>

			<ul>
					<li class="cat-item cat-item-177"><a href="https://johncarlosbaez.wordpress.com/category/art/">art</a> (3)
</li>
	<li class="cat-item cat-item-4003"><a href="https://johncarlosbaez.wordpress.com/category/astronomy/">astronomy</a> (29)
</li>
	<li class="cat-item cat-item-8262191"><a href="https://johncarlosbaez.wordpress.com/category/azimuth/">azimuth</a> (60)
</li>
	<li class="cat-item cat-item-86856"><a href="https://johncarlosbaez.wordpress.com/category/biodiversity/">biodiversity</a> (38)
</li>
	<li class="cat-item cat-item-4936"><a href="https://johncarlosbaez.wordpress.com/category/biology/">biology</a> (107)
</li>
	<li class="cat-item cat-item-355244"><a href="https://johncarlosbaez.wordpress.com/category/carbon-emissions/">carbon emissions</a> (78)
</li>
	<li class="cat-item cat-item-5936"><a href="https://johncarlosbaez.wordpress.com/category/chemistry/">chemistry</a> (74)
</li>
	<li class="cat-item cat-item-6108"><a href="https://johncarlosbaez.wordpress.com/category/climate/">climate</a> (155)
</li>
	<li class="cat-item cat-item-5043"><a href="https://johncarlosbaez.wordpress.com/category/computer-science/">computer science</a> (57)
</li>
	<li class="cat-item cat-item-9204"><a href="https://johncarlosbaez.wordpress.com/category/conferences/">conferences</a> (81)
</li>
	<li class="cat-item cat-item-1098"><a href="https://johncarlosbaez.wordpress.com/category/culture/">culture</a> (4)
</li>
	<li class="cat-item cat-item-657"><a href="https://johncarlosbaez.wordpress.com/category/economics/">economics</a> (32)
</li>
	<li class="cat-item cat-item-1212"><a href="https://johncarlosbaez.wordpress.com/category/energy/">energy</a> (50)
</li>
	<li class="cat-item cat-item-25393"><a href="https://johncarlosbaez.wordpress.com/category/engineering/">engineering</a> (11)
</li>
	<li class="cat-item cat-item-14852"><a href="https://johncarlosbaez.wordpress.com/category/mathematics/game-theory/">game theory</a> (29)
</li>
	<li class="cat-item cat-item-1215"><a href="https://johncarlosbaez.wordpress.com/category/geography/">geography</a> (4)
</li>
	<li class="cat-item cat-item-337"><a href="https://johncarlosbaez.wordpress.com/category/health/">health</a> (4)
</li>
	<li class="cat-item cat-item-678"><a href="https://johncarlosbaez.wordpress.com/category/history/">history</a> (2)
</li>
	<li class="cat-item cat-item-23375499"><a href="https://johncarlosbaez.wordpress.com/category/information-and-entropy/">information and entropy</a> (92)
</li>
	<li class="cat-item cat-item-3558"><a href="https://johncarlosbaez.wordpress.com/category/jobs/">jobs</a> (11)
</li>
	<li class="cat-item cat-item-5465"><a href="https://johncarlosbaez.wordpress.com/category/journals/">journals</a> (5)
</li>
	<li class="cat-item cat-item-3582"><a href="https://johncarlosbaez.wordpress.com/category/mathematics/">mathematics</a> (478)
</li>
	<li class="cat-item cat-item-18"><a href="https://johncarlosbaez.wordpress.com/category/music/">music</a> (3)
</li>
	<li class="cat-item cat-item-3968"><a href="https://johncarlosbaez.wordpress.com/category/networks/">networks</a> (185)
</li>
	<li class="cat-item cat-item-154934"><a href="https://johncarlosbaez.wordpress.com/category/oceans/">oceans</a> (13)
</li>
	<li class="cat-item cat-item-1211"><a href="https://johncarlosbaez.wordpress.com/category/physics/">physics</a> (204)
</li>
	<li class="cat-item cat-item-10451"><a href="https://johncarlosbaez.wordpress.com/category/probability/">probability</a> (92)
</li>
	<li class="cat-item cat-item-4909"><a href="https://johncarlosbaez.wordpress.com/category/psychology/">psychology</a> (6)
</li>
	<li class="cat-item cat-item-3330"><a href="https://johncarlosbaez.wordpress.com/category/publishing/">publishing</a> (19)
</li>
	<li class="cat-item cat-item-46615"><a href="https://johncarlosbaez.wordpress.com/category/puzzles/">puzzles</a> (14)
</li>
	<li class="cat-item cat-item-4140243"><a href="https://johncarlosbaez.wordpress.com/category/quantum-technologies/">quantum technologies</a> (28)
</li>
	<li class="cat-item cat-item-562"><a href="https://johncarlosbaez.wordpress.com/category/questions/">questions</a> (3)
</li>
	<li class="cat-item cat-item-93974"><a href="https://johncarlosbaez.wordpress.com/category/risks/">risks</a> (48)
</li>
	<li class="cat-item cat-item-37893"><a href="https://johncarlosbaez.wordpress.com/category/seminars/">seminars</a> (21)
</li>
	<li class="cat-item cat-item-581 current-cat"><a aria-current="page" href="https://johncarlosbaez.wordpress.com/category/software/">software</a> (19)
</li>
	<li class="cat-item cat-item-39438"><a href="https://johncarlosbaez.wordpress.com/category/strategies/">strategies</a> (36)
</li>
	<li class="cat-item cat-item-6877"><a href="https://johncarlosbaez.wordpress.com/category/sustainability/">sustainability</a> (71)
</li>
	<li class="cat-item cat-item-66608272"><a href="https://johncarlosbaez.wordpress.com/category/the-practice-of-science/">the practice of science</a> (27)
</li>
	<li class="cat-item cat-item-61590"><a href="https://johncarlosbaez.wordpress.com/category/this-weeks-finds/">this week&#039;s finds</a> (18)
</li>
			</ul>

			</li>
<li id="linkcat-20924250" class="widget widget_links"><h2 class="widgettitle">also visit these:</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://www.azimuthproject.org/azimuth/show/Azimuth+Blog" title="Go here to see what’s on this blog, organized by topic or author!">Azimuth Blog Overview</a></li>
<li><a href="http://www.azimuthproject.org/azimuth/show/HomePage" title="for scientists and engineers who want to save the planet">Azimuth Project</a></li>
<li><a href="http://bittooth.blogspot.com/" title="David Summers on energy: oil, gas and more">Bit Tooth Energy</a></li>
<li><a href="http://bravenewclimate.com/" title="Barry Brooks on climate and energy policy">Brave New Climate</a></li>
<li><a href="http://physics.ucsd.edu/do-the-math/" title="UC San Diego prof uses physics and estimation to assess energy, growth, options">Do the Math</a></li>
<li><a href="http://dotearth.blogs.nytimes.com/" title="Andrew Revkin’s environmental blog on the New York Times">Dot Earth</a></li>
<li><a href="http://e360.yale.edu/" title="News from the Yale School of Forestry &amp; Environmental Studies">Environment 360</a></li>
<li><a href="http://planet3.org/" title="A metablog on sustainability">Planet3.0</a></li>
<li><a href="http://www.realclimate.org/" title="climate science from climate scientists">RealClimate</a></li>
<li><a href="http://www.easterbrook.ca/steve/" title="Steve Easterbrook&#8217;s blog on software engineering and climate modeling">Serendipity</a></li>
<li><a href="http://scienceofdoom.com/" title="climate science in perspective">The Science of Doom</a></li>
<li><a href="http://e360.yale.edu/" title="opinion, analysis, reporting and debate on environmental issues">Yale Environment 360</a></li>

	</ul>
</li>

<li id="rss_links-3" class="widget widget_rss_links"><h2 class="widgettitle">RSS feeds:</h2>
<p class="size-small"><a class="feed-image-link" href="https://johncarlosbaez.wordpress.com/feed/" title="Subscribe to Posts"><img src="https://johncarlosbaez.wordpress.com/i/rss/red-small.png?m=1391188133h" alt="RSS Feed" /></a>&nbsp;<a href="https://johncarlosbaez.wordpress.com/feed/" title="Subscribe to Posts">RSS - Posts</a></p><p class="size-small"><a class="feed-image-link" href="https://johncarlosbaez.wordpress.com/comments/feed/" title="Subscribe to Comments"><img src="https://johncarlosbaez.wordpress.com/i/rss/red-small.png?m=1391188133h" alt="RSS Feed" /></a>&nbsp;<a href="https://johncarlosbaez.wordpress.com/comments/feed/" title="Subscribe to Comments">RSS - Comments</a></p>
</li>
<li id="blog_subscription-3" class="widget widget_blog_subscription jetpack_subscription_widget"><h2 class="widgettitle"><label for="subscribe-field">Email Subscription:</label></h2>

			<form
				action="https://subscribe.wordpress.com"
				method="post"
				accept-charset="utf-8"
				id=""
			>
				<p>Enter your email address to subscribe to this blog and receive notifications of new posts by email.</p>
					<div class="jetpack-subscribe-count">
						<p>
						Join 5,227 other followers						</p>
					</div>
									<p id="subscribe-email">
					<label
						id="subscribe-field-label"
						for="subscribe-field"
						class="screen-reader-text"
					>
						Email Address:					</label>

					<input
							type="email"
							name="email"
							
							style="width: 95%; padding: 1px 10px"
							placeholder="Enter your email address"
							value=""
							id="subscribe-field"
						/>				</p>

				<p id="subscribe-submit"
									>
                    <input type="hidden" name="action" value="subscribe"/>
                    <input type="hidden" name="blog_id" value="12777403"/>
                    <input type="hidden" name="source" value="https://johncarlosbaez.wordpress.com/category/software/page/2/"/>
                    <input type="hidden" name="sub-type" value="widget"/>
                    <input type="hidden" name="redirect_fragment" value="blog_subscription-3"/>
					<input type="hidden" id="_wpnonce" name="_wpnonce" value="0272f16312" />                    <button type="submit"
	                    	                        class="wp-block-button__link"
	                    		                	                >
	                    Sign me up!                    </button>
                </p>
            </form>
			
</li>
<li id="search-3" class="widget widget_search"><h2 class="widgettitle">SEARCH:</h2>
<form method="get" id="searchform" action="https://johncarlosbaez.wordpress.com/">
<div><label for="s" class="search-label">Search</label><input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form></li>
<li id="blog-stats-2" class="widget widget_blog-stats"><h2 class="widgettitle">Blog Stats:</h2>
		<ul>
			<li>4,176,908 hits</li>
		</ul>
		</li>
		</ul>
	</div>



<div id="footer">
	<p>
	<br />
	<a href="https://wordpress.com/?ref=footer_blog" rel="nofollow">Blog at WordPress.com.</a>
	</p>
</div>

</div>

		<!--  -->
<script src='//0.gravatar.com/js/gprofiles.js?ver=202138y' id='grofiles-cards-js'></script>
<script id='wpgroho-js-extra'>
var WPGroHo = {"my_hash":""};
</script>
<script crossorigin='anonymous' type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1610363240h'></script>

	<script>
		// Initialize and attach hovercards to all gravatars
		( function() {
			function init() {
				if ( typeof Gravatar === 'undefined' ) {
					return;
				}

				if ( typeof Gravatar.init !== 'function' ) {
					return;
				}

				Gravatar.profile_cb = function ( hash, id ) {
					WPGroHo.syncProfileData( hash, id );
				};

				Gravatar.my_hash = WPGroHo.my_hash;
				Gravatar.init( 'body', '#wp-admin-bar-my-account' );
			}

			if ( document.readyState !== 'loading' ) {
				init();
			} else {
				document.addEventListener( 'DOMContentLoaded', init );
			}
		} )();
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-62b2df0762257e75433ad6f161488c3a">
	</div>
	<div class="grofile-hash-map-34784534843022b3541c8ddd693718cb">
	</div>
	<div class="grofile-hash-map-ba06491deb8346d20356ac2ae05893ee">
	</div>
	<div class="grofile-hash-map-24dc7e2371491f36fd4538b3474920b5">
	</div>
	<div class="grofile-hash-map-d3c6d7ec8069e25c08a0a11263581925">
	</div>
	</div>

<script>
window.addEventListener( "load", function( event ) {
	var link = document.createElement( "link" );
	link.href = "https://s0.wp.com/wp-content/mu-plugins/actionbar/actionbar.css?v=20210915";
	link.type = "text/css";
	link.rel = "stylesheet";
	document.head.appendChild( link );

	var script = document.createElement( "script" );
	script.src = "https://s0.wp.com/wp-content/mu-plugins/actionbar/actionbar.js?v=20210920";
	script.defer = true;
	document.body.appendChild( script );
} );
</script>

	<script crossorigin='anonymous' type='text/javascript' src='https://s1.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgjISczMo6qBlSUZ+VQ10bmgAGicfa6toZmhqYm5maWxURYACqd/8g=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s1.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script crossorigin='anonymous' type='text/javascript' src='https://s2.wp.com/_static/??-eJx9jksOwjAMRC9EarWLSl0gzpImVuXQfLAd2t6eVAIJsWA1nrGePbAV43JSTApBwOOTHJa9C3KBr1Wspqx1oSRgfaRkZssQrShym4yydXf5hdq98KjIx1u6rbgcTeG8H4axZaIfhpJbq0c5oWYxzui79uhPkY38giogdRbHVJRyOjvc4rUfh2nqh2Hswwtq4FN0'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="//stats.wp.com/w.js?62" defer></script> <script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'12777403','blog_tz':'0','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'12777403','v':'wpcom','tz':'0','user_id':'0','subd':'johncarlosbaez'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29+Smw0TDhnZmRTK0hlRi9QSGh6bi9GXVhBJWIlZlR5U1JMLU8/MkNtblkvY1d6eVImTEouL2UleTBRZmlNdkp0aWJaNFJhPS0uTVpHa1hIc25EbVJyQmw/SkZ+Q3lLcjU/NDBvQTY5SUYlL09GczNGJkhCfGxfSzIsTTFVZWlnc0ZuY2gxOWx5cjdVaF0/TFA5c0pUeHpGYS9pL1BFeTE1al1hXXorOFY0MF10eDVpTzcuRDlbSyx5c2xEZF8wbGlUc1dibi58TXdzQ182WExQNUZXS2wvWDJHQkQwb2xMOC5HOXZxbmk4VHwzNHRtSFt6OEtoY3hoa0EvTjBrb2J1ejdXMUE4aE11LUZma3IlMj9wUkYrfHAmTjZEL1BZRVdpWjlQa2NZenxvazFR'}]);
_stq.push([ 'clickTrackerInit', '12777403', '0' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:1px;width:1px;overflow:hidden;position:absolute;bottom:1px;" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script>
</body>
</html>